
function xAlert(){var a=this;window.myXAlert=this,a.defaults={title:"Error Alert",content:"",orientation:"horizontal",callback:function(){}};for(k in a.defaults)typeof a[k]!=typeof a.defaults[k]&&(a[k]=a.defaults[k]);a.content=arguments[0]?arguments[0]:a.defaults.content,a.callback=arguments[1]?arguments[1]:a.defaults.callback,a.title=arguments[2]?arguments[2]:a.defaults.title,a.buttons=arguments[3]?arguments[3].split(","):["Dismiss"],a.mainButtons=a.buttons.filter(function(b,c){return-1!=a.buttons[c].indexOf("#")&&(a.buttons[c]=a.buttons[c].replace("#",""))?!0:void 0});try{if(isPhoneGap)return navigator.notification.confirm(a.content,a.callback,a.title,a.buttons.toString())}catch(b){}a.cancelTouchMove=function(a){return alert("cancel"),a.preventDefault(),a.stopPropagation(),!1},a.init()}!function(){function a(a,b){return a.name=b}function b(a,b){return a.href=b}function c(a){zb.set(a)}function d(a){return"function"==typeof a}function e(a){return"[object Array]"==Object[hb].toString[ob](Object(a))}function f(a){return void 0!=a&&-1<(a.constructor+"")[Y]("String")}function g(a,b){return 0==a[Y](b)}function h(a){var b=Eb[bb]("img");return b.width=1,b.height=1,b.src=a,b}function i(){}function j(a){return M instanceof Function?M(a):(c(28),a)}function k(a){return j(a)[U](/\(/g,"%28")[U](/\)/g,"%29")}function l(a,b){if(a){var c=Eb[bb]("script");c.type="text/javascript",c.async=!0,c.src=a,c.id=b;var d=Eb.getElementsByTagName("script")[0];d[wb].insertBefore(c,d)}}function m(){return lc||"https:"==Eb[kb][pb]?"https:":"http:"}function n(){var a=""+Eb[kb][lb];return 0==a[Y]("www.")?a[sb](4):a}function o(a){var b=Eb.referrer;if(/^https?:\/\//i[S](b)){if(a)return b;a="//"+Eb[kb][lb];var c=b[Y](a);if((5==c||6==c)&&(a=b[X](c+a[gb]),"/"==a||"?"==a||""==a||":"==a))return;return b}}function p(a,b){if(1==b[gb]&&null!=b[0]&&"object"==typeof b[0])return b[0];for(var c={},d=P.min(a[gb]+1,b[gb]),e=0;d>e;e++){if("object"==typeof b[e]){for(var f in b[e])b[e].hasOwnProperty(f)&&(c[f]=b[e][f]);break}e<a[gb]&&(c[a[e]]=b[e])}return c}function q(a,b){for(var c=0;c<a[gb];c++)if(b==a[c])return!0;return!1}function r(a){if(100!=a.get(Ed)&&L($b(a,sd))%1e4>=100*_b(a,Ed))throw"abort"}function s(a){if(Fb($b(a,ud)))throw"abort"}function t(){Eb[kb][pb]}function u(a){try{Db.XMLHttpRequest&&"withCredentials"in new Db.XMLHttpRequest?c(40):Db.XDomainRequest&&c(41),Db[vb].sendBeacon&&c(42)}catch(b){}a.set(sc,_b(a,sc)+1);var d=[];Yb.map(function(b,c){if(c.p){var e=a.get(b);void 0!=e&&e!=c[$]&&("boolean"==typeof e&&(e*=1),d[Q](c.p+"="+j(""+e)))}}),d[Q]("z="+Wb()),a.set(rc,d[xb]("&"),!0)}function v(a){Pb($b(a,rc),a.get(qc)),a.set(qc,i,!0)}function w(a){var b=Db.gaData;b&&(b.expId&&a.set(Wc,b.expId),b.expVar&&a.set(Xc,b.expVar))}function x(){if(Db[vb]&&"preview"==Db[vb].loadPurpose)throw"abort"}function y(a){var b=Db.gaDevIds;e(b)&&0!=b[gb]&&a.set("&did",b[xb](","),!0)}function z(a){je[S](a.get(ud))||c(44)}function A(a){var b=_b(a,_c);b>=500&&c(15);var d=$b(a,pc);if("transaction"!=d&&"item"!=d){var d=_b(a,bd),e=(new Date)[eb](),f=_b(a,ad);if(0==f&&a.set(ad,e),f=P.round(2*(e-f)/1e3),f>0&&(d=P.min(d+f,20),a.set(ad,e)),0>=d)throw"abort";a.set(bd,--d)}a.set(_c,++b)}function B(a,b,d,e){b[a]=function(){try{return e&&c(e),d[ub](this,arguments)}catch(b){var f=b&&b[db];if(!(1<=100*P.random()||Fb("?"))){var g=["t=error","_e=exc","_v=j22","sr=1"];a&&g[Q]("_f="+a),f&&g[Q]("_m="+j(f[sb](0,100))),g[Q]("aip=1"),g[Q]("z="+Vb()),Pb(g[xb]("&"))}throw b}}}function C(){var a,b,c;if((c=(c=Db[vb])?c.plugins:null)&&c[gb])for(var d=0;d<c[gb]&&!b;d++){var e=c[d];-1<e[db][Y]("Shockwave Flash")&&(b=e.description)}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),b=a.GetVariable("$version")}catch(f){}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),b="WIN 6,0,21,0",a.AllowScriptAccess="always",b=a.GetVariable("$version")}catch(g){}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),b=a.GetVariable("$version")}catch(h){}return b&&(a=b[Z](/[\d]+/g))&&3<=a[gb]&&(b=a[0]+"."+a[1]+" r"+a[2]),b||void 0}function D(a,b,c){"none"==b&&(b="");var d=[],e=Hb(a);a="__utma"==a?6:2;for(var f=0;f<e[gb];f++){var g=(""+e[f])[jb](".");g[gb]>=a&&d[Q]({hash:g[0],R:e[f],O:g})}return 0==d[gb]?void 0:1==d[gb]?d[0]:E(b,d)||E(c,d)||E(null,d)||d[0]}function E(a,b){var c,d;null==a?c=d=1:(c=L(a),d=L(g(a,".")?a[sb](1):"."+a));for(var e=0;e<b[gb];e++)if(b[e][R]==c||b[e][R]==d)return b[e]}function F(a){a=a.get(sd);var b=G(a,0);return"_ga=1."+j(b+"."+a)}function G(a,b){for(var c=new Date,d=Db[vb],e=d.plugins||[],c=[a,d.userAgent,c.getTimezoneOffset(),c.getYear(),c.getDate(),c.getHours(),c.getMinutes()+b],d=0;d<e[gb];++d)c[Q](e[d].description);return L(c[xb]("."))}function H(a,b){if(b==Eb[kb][lb])return!1;for(var c=0;c<a[gb];c++)if(0<=b[Y](a[c]))return!0;return!1}function I(){var a=Db.gaGlobal=Db.gaGlobal||{};return a.hid=a.hid||Vb()}function J(a){return 0<=a[Y](".")||0<=a[Y](":")}function K(a){function c(a){var b=(a[lb]||"")[jb](":")[0][yb](),c=(a[pb]||"")[yb](),c=1*a[ab]||("http:"==c?80:"https:"==c?443:"");return a=a.pathname||"",g(a,"/")||(a="/"+a),[b,""+c,a]}var d=Eb[bb]("a");b(d,Eb[kb][rb]);var e=(d[pb]||"")[yb](),f=c(d),h=d[mb]||"",i=e+"//"+f[0]+(f[1]?":"+f[1]:"");return g(a,"//")?a=e+a:g(a,"/")?a=i+a:!a||g(a,"?")?a=i+f[2]+(a||h):0>a[jb]("/")[0][Y](":")&&(a=i+f[2][sb](0,f[2].lastIndexOf("/"))+"/"+a),b(d,a),e=c(d),{protocol:(d[pb]||"")[yb](),host:e[0],port:e[1],path:e[2],G:d[mb]||"",url:a||""}}function L(a){var b,c=1,d=0;if(a)for(c=0,b=a[gb]-1;b>=0;b--)d=a.charCodeAt(b),c=(c<<6&268435455)+d+(d<<14),d=266338304&c,c=0!=d?c^d>>21:c;return c}var M=encodeURIComponent,N=window,O=setTimeout,P=Math,Q="push",R="hash",S="test",T="slice",U="replace",V="data",W="cookie",X="charAt",Y="indexOf",Z="match",$="defaultValue",_="send",ab="port",bb="createElement",cb="setAttribute",db="name",eb="getTime",fb="host",gb="length",hb="prototype",ib="clientWidth",jb="split",kb="location",lb="hostname",mb="search",nb="target",ob="call",pb="protocol",qb="clientHeight",rb="href",sb="substring",tb="action",ub="apply",vb="navigator",wb="parentNode",xb="join",yb="toLowerCase",zb=new function(){var a=[];this.set=function(b){a[b]=!0},this.M=function(){for(var b=[],c=0;c<a[gb];c++)a[c]&&(b[P.floor(c/6)]=b[P.floor(c/6)]^1<<c%6);for(c=0;c<b[gb];c++)b[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[X](b[c]||0);return b[xb]("")+"~"}},Ab=function(a,b,d,e){try{a.addEventListener?a.addEventListener(b,d,!!e):a.attachEvent&&a.attachEvent("on"+b,d)}catch(f){c(27)}},Bb=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},Cb=function(){this.keys=[],this.w={},this.m={}};Cb[hb].set=function(a,b,c){this.keys[Q](a),c?this.m[":"+a]=b:this.w[":"+a]=b},Cb[hb].get=function(a){return this.m.hasOwnProperty(":"+a)?this.m[":"+a]:this.w[":"+a]},Cb[hb].map=function(a){for(var b=0;b<this.keys[gb];b++){var c=this.keys[b],d=this.get(c);d&&a(c,d)}};var Db=N,Eb=document,Fb=function(a){var b=Db._gaUserPrefs;if(b&&b.ioo&&b.ioo()||a&&!0===Db["ga-disable-"+a])return!0;try{var c=Db.external;if(c&&c._gaUserPrefs&&"oo"==c._gaUserPrefs)return!0}catch(d){}return!1},Gb=function(a){O(a,100)},Hb=function(a){var b=[],c=Eb[W][jb](";");a=new RegExp("^\\s*"+a+"=\\s*(.*?)\\s*$");for(var d=0;d<c[gb];d++){var e=c[d][Z](a);e&&b[Q](e[1])}return b},Ib=function(a,b,d,e,f,g){return(f=Fb(f)?!1:Kb[S](Eb[kb][lb])||"/"==d&&Jb[S](e)?!1:!0)?(b&&1200<b[gb]&&(b=b[sb](0,1200),c(24)),d=a+"="+b+"; path="+d+"; ",g&&(d+="expires="+new Date((new Date)[eb]()+g).toGMTString()+"; "),e&&"none"!=e&&(d+="domain="+e+";"),e=Eb[W],Eb.cookie=d,e!=Eb[W]||q(Hb(a),b)):!1},Jb=new RegExp(/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/),Kb=new RegExp(/(^|\.)doubleclick\.net$/i),Lb=function(){for(var a=Db[vb],a=a.appName+a.version+a.platform+a.userAgent+(Eb[W]?Eb[W]:"")+(Eb.referrer?Eb.referrer:""),b=a[gb],c=Db.history[gb];c>0;)a+=c--^b++;return L(a)},Mb=function(){return m()+"//www.google-analytics.com"},Nb=function(b){a(this,"len"),this.message=b+"-8192"},Ob=function(b){a(this,"ff2post"),this.message=b+"-2036"},Pb=function(a,b){if(b=b||i,2036>=a[gb])Qb(a,b);else{if(!(8192>=a[gb]))throw new Nb(a[gb]);var c=b;if(0<=Db[vb].userAgent[Y]("Firefox")&&![].reduce)throw new Ob(a[gb]);Sb(a,c)||Rb(a,c)||Tb(a,c)||c()}},Qb=function(a,b){var c=h(Mb()+"/collect?"+a);c.onload=c.onerror=function(){c.onload=null,c.onerror=null,b()}},Rb=function(a,b){var c;return(c=Db.XDomainRequest)?(c=new c,c.open("POST",Mb()+"/collect"),c.onerror=function(){b()},c.onload=b,c[_](a),!0):!1},Sb=function(a,b){var c=Db.XMLHttpRequest;if(!c)return!1;var d=new c;return"withCredentials"in d?(d.open("POST",Mb()+"/collect",!0),d.withCredentials=!0,d.setRequestHeader("Content-Type","text/plain"),d.onreadystatechange=function(){4==d.readyState&&(b(),d=null)},d[_](a),!0):!1},Tb=function(b,c){if(!Eb.body)return Gb(function(){Tb(b,c)}),!0;b=M(b);try{var d=Eb[bb]('<iframe name="'+b+'"></iframe>')}catch(e){d=Eb[bb]("iframe"),a(d,b)}d.height="0",d.width="0",d.style.display="none",d.style.visibility="hidden";var f=Eb[kb],f=Mb()+"/analytics_iframe.html#"+M(f[pb]+"//"+f[fb]+"/favicon.ico"),g=function(){d.src="",d[wb]&&d[wb].removeChild(d)};Ab(Db,"beforeunload",g);var h=!1,i=0,j=function(){if(!h){try{if(i>9||d.contentWindow[kb][fb]==Eb[kb][fb])return h=!0,g(),Bb(Db,"beforeunload",g),void c()}catch(a){}i++,O(j,200)}};return Ab(d,"load",j),Eb.body.appendChild(d),d.src=f,!0},Ub=function(){this.t=[]};Ub[hb].add=function(a){this.t[Q](a)},Ub[hb].D=function(a){try{for(var b=0;b<this.t[gb];b++){var c=a.get(this.t[b]);c&&d(c)&&c[ob](Db,a)}}catch(e){}b=a.get(qc),b!=i&&d(b)&&(a.set(qc,i,!0),O(b,10))};var Vb=function(){return P.round(2147483647*P.random())},Wb=function(){try{var a=new Uint32Array(1);return Db.crypto.getRandomValues(a),2147483647&a[0]}catch(b){return Vb()}},Xb=function(){this.data=new Cb},Yb=new Cb,Zb=[];Xb[hb].get=function(a){var b=dc(a),c=this[V].get(a);return b&&void 0==c&&(c=d(b[$])?b[$]():b[$]),b&&b.n?b.n(this,a,c):c};var $b=function(a,b){var c=a.get(b);return void 0==c?"":""+c},_b=function(a,b){var c=a.get(b);return void 0==c||""===c?0:1*c};Xb[hb].set=function(a,b,c){if(a)if("object"==typeof a)for(var d in a)a.hasOwnProperty(d)&&bc(this,d,a[d],c);else bc(this,a,b,c)};var ac,bc=function(a,b,c,d){if(void 0!=c)switch(b){case ud:je[S](c)}var e=dc(b);e&&e.o?e.o(a,b,c,d):a[V].set(b,c,d)},cc=function(b,c,d,e,f){a(this,b),this.p=c,this.n=e,this.o=f,this.defaultValue=d},dc=function(a){var b=Yb.get(a);if(!b)for(var c=0;c<Zb[gb];c++){var d=Zb[c],e=d[0].exec(a);if(e){b=d[1](e),Yb.set(b[db],b);break}}return b},ec=function(a){var b;return Yb.map(function(c,d){d.p==a&&(b=d)}),b&&b[db]},fc=function(a,b,c,d,e){return a=new cc(a,b,c,d,e),Yb.set(a[db],a),a[db]},gc=function(a,b){Zb[Q]([new RegExp("^"+a+"$"),b])},hc=function(a,b,c){return fc(a,b,c,void 0,ic)},ic=function(){};if(ac=f(N.GoogleAnalyticsObject)){var jc=N.GoogleAnalyticsObject;ac=jc?jc[U](/^[\s\xa0]+|[\s\xa0]+$/g,""):""}var kc=ac||"ga",lc=!1,mc=hc("apiVersion","v"),nc=hc("clientVersion","_v");fc("anonymizeIp","aip");var oc=fc("adSenseId","a"),pc=fc("hitType","t"),qc=fc("hitCallback"),rc=fc("hitPayload");fc("nonInteraction","ni"),fc("currencyCode","cu"),fc("sessionControl","sc",""),fc("queueTime","qt");var sc=fc("_s","_s");fc("screenName","cd");var tc=fc("location","dl",""),uc=fc("referrer","dr"),vc=fc("page","dp","");fc("hostname","dh");var wc=fc("language","ul"),xc=fc("encoding","de");fc("title","dt",function(){return Eb.title||void 0}),gc("contentGroup([0-9]+)",function(a){return new cc(a[0],"cg"+a[1])});var yc=fc("screenColors","sd"),zc=fc("screenResolution","sr"),Ac=fc("viewportSize","vp"),Bc=fc("javaEnabled","je"),Cc=fc("flashVersion","fl");fc("campaignId","ci"),fc("campaignName","cn"),fc("campaignSource","cs"),fc("campaignMedium","cm"),fc("campaignKeyword","ck"),fc("campaignContent","cc");var Dc=fc("eventCategory","ec"),Ec=fc("eventAction","ea"),Fc=fc("eventLabel","el"),Gc=fc("eventValue","ev"),Hc=fc("socialNetwork","sn"),Ic=fc("socialAction","sa"),Jc=fc("socialTarget","st"),Kc=fc("l1","plt"),Lc=fc("l2","pdt"),Mc=fc("l3","dns"),Nc=fc("l4","rrt"),Oc=fc("l5","srt"),Pc=fc("l6","tcp"),Qc=fc("l7","dit"),Rc=fc("l8","clt"),Sc=fc("timingCategory","utc"),Tc=fc("timingVar","utv"),Uc=fc("timingLabel","utl"),Vc=fc("timingValue","utt");fc("appName","an"),fc("appVersion","av",""),fc("appId","aid",""),fc("appInstallerId","aiid",""),fc("exDescription","exd"),fc("exFatal","exf");var Wc=fc("expId","xid"),Xc=fc("expVar","xvar"),Yc=fc("_utma","_utma"),Zc=fc("_utmz","_utmz"),$c=fc("_utmht","_utmht"),_c=fc("_hc",void 0,0),ad=fc("_ti",void 0,0),bd=fc("_to",void 0,20);gc("dimension([0-9]+)",function(a){return new cc(a[0],"cd"+a[1])}),gc("metric([0-9]+)",function(a){return new cc(a[0],"cm"+a[1])}),fc("linkerParam",void 0,void 0,F,ic);var cd=fc("usage","_u",void 0,function(){return zb.M()},ic);fc("forceSSL",void 0,void 0,function(){return lc},function(a,b,d){c(34),lc=!!d});var dd=fc("_j1","jid");fc("_j2","gjid"),gc("\\&(.*)",function(a){var b=new cc(a[0],a[1]),c=ec(a[0][sb](1));return c&&(b.n=function(a){return a.get(c)},b.o=function(a,b,d,e){a.set(c,d,e)},b.p=void 0),b});var ed=hc("_oot"),fd=fc("previewTask"),gd=fc("checkProtocolTask"),hd=fc("validationTask"),id=fc("checkStorageTask"),jd=fc("historyImportTask"),kd=fc("samplerTask"),ld=hc("_rlt"),md=fc("buildHitTask"),nd=fc("sendHitTask"),od=fc("ceTask"),pd=fc("devIdTask"),qd=fc("timingTask"),rd=hc("name"),sd=hc("clientId","cid"),td=fc("userId","uid"),ud=hc("trackingId","tid"),vd=hc("cookieName",void 0,"_ga"),wd=hc("cookieDomain"),xd=hc("cookiePath",void 0,"/"),yd=hc("cookieExpires",void 0,63072e3),zd=hc("legacyCookieDomain"),Ad=hc("legacyHistoryImport",void 0,!0),Bd=hc("storage",void 0,"cookie"),Cd=hc("allowLinker",void 0,!1),Dd=hc("allowAnchor",void 0,!0),Ed=hc("sampleRate","sf",100),Fd=hc("siteSpeedSampleRate",void 0,1),Gd=hc("alwaysSendReferrer",void 0,!1),Hd=function(a){var b=ae;return b.fa&&b.$?0:(b.$=!0,0==b.V?0:(void 0===a&&(a=Wb()),0==a%b.V?P.floor(a/b.V)%b.ea+1:0))},Id=function(a,b){var c=P.min(_b(a,Fd),100);if(!(L($b(a,sd))%100>=c)&&(c={},Jd(c)||Kd(c))){var d=c[Kc];void 0==d||1/0==d||isNaN(d)||(d>0?(Ld(c,Mc),Ld(c,Pc),Ld(c,Oc),Ld(c,Lc),Ld(c,Nc),Ld(c,Qc),Ld(c,Rc),b(c)):Ab(Db,"load",function(){Id(a,b)},!1))}},Jd=function(a){var b=Db.performance||Db.webkitPerformance,b=b&&b.timing;if(!b)return!1;var c=b.navigationStart;return 0==c?!1:(a[Kc]=b.loadEventStart-c,a[Mc]=b.domainLookupEnd-b.domainLookupStart,a[Pc]=b.connectEnd-b.connectStart,a[Oc]=b.responseStart-b.requestStart,a[Lc]=b.responseEnd-b.responseStart,a[Nc]=b.fetchStart-c,a[Qc]=b.domInteractive-c,a[Rc]=b.domContentLoadedEventStart-c,!0)},Kd=function(a){if(Db.top!=Db)return!1;var b=Db.external,c=b&&b.onloadT;return b&&!b.isValidLoadTime&&(c=void 0),c>2147483648&&(c=void 0),c>0&&b.setPageReadyTime(),void 0==c?!1:(a[Kc]=c,!0)},Ld=function(a,b){var c=a[b];(isNaN(c)||1/0==c||0>c)&&(a[b]=void 0)},Md=function(a){return function(b){"pageview"!=b.get(pc)||a.I||(a.I=!0,Id(b,function(b){a[_]("timing",b)}))}},Nd=!1,Od=function(a){if("cookie"==$b(a,Bd)){var b=$b(a,vd),d=Rd(a),e=Vd($b(a,xd)),f=Td($b(a,wd)),g=1e3*_b(a,yd),h=$b(a,ud);if("auto"!=f)Ib(b,d,e,f,h,g)&&(Nd=!0);else{c(32);var i;if(d=[],f=n()[jb]("."),4!=f[gb]||(i=f[f[gb]-1],parseInt(i,10)!=i)){for(i=f[gb]-2;i>=0;i--)d[Q](f[T](i)[xb]("."));d[Q]("none"),i=d}else i=["none"];for(var j=0;j<i[gb];j++)if(f=i[j],a[V].set(wd,f),d=Rd(a),Ib(b,d,e,f,h,g))return 1==Ud(f)&&c(36),"none"==f&&c(37),void(Nd=!0);a[V].set(wd,"auto")}}},Pd=function(a){if("cookie"==$b(a,Bd)&&!Nd&&(Od(a),!Nd))throw"abort"},Qd=function(a){if(a.get(Ad)){var b=$b(a,wd),d=$b(a,zd)||n(),e=D("__utma",d,b);e&&(c(19),a.set($c,(new Date)[eb](),!0),a.set(Yc,e.R),(b=D("__utmz",d,b))&&e[R]==b[R]&&a.set(Zc,b.R))}},Rd=function(a){var b=k($b(a,sd)),c=Ud($b(a,wd));return a=Wd($b(a,xd)),a>1&&(c+="-"+a),["GA1",c,b][xb](".")},Sd=function(a,b,c){for(var d,e=[],f=[],g=0;g<a[gb];g++){var h=a[g];h.r[c]==b?e[Q](h):void 0==d||h.r[c]<d?(f=[h],d=h.r[c]):h.r[c]==d&&f[Q](h)}return 0<e[gb]?e:f},Td=function(a){return 0==a[Y](".")?a.substr(1):a},Ud=function(a){return Td(a)[jb](".")[gb]},Vd=function(a){return a?(1<a[gb]&&a.lastIndexOf("/")==a[gb]-1&&(a=a.substr(0,a[gb]-1)),0!=a[Y]("/")&&(a="/"+a),a):"/"},Wd=function(a){return a=Vd(a),"/"==a?1:a[jb]("/")[gb]},Xd=new RegExp(/^https?:\/\/([^\/:]+)/),Yd=/(.*)([?&#])(?:_ga=[^&#]*)(?:&?)(.*)/,Zd=function(a){this.target=a,this.T=!1};Zd[hb].Q=function(a,c){if(a.tagName){if("a"==a.tagName[yb]())return void(a[rb]&&b(a,$d(this,a[rb],c)));if("form"==a.tagName[yb]())return _d(this,a)}return"string"==typeof a?$d(this,a,c):void 0};var $d=function(a,b,c){var d=Yd.exec(b);d&&3<=d[gb]&&(b=d[1]+(d[3]?d[2]+d[3]:"")),a=a[nb].get("linkerParam");var e=b[Y]("?"),d=b[Y]("#");return c?b+=(-1==d?"#":"&")+a:(c=-1==e?"?":"&",b=-1==d?b+(c+a):b[sb](0,d)+c+a+b[sb](d)),b},_d=function(a,b){if(b&&b[tb]){var c=a[nb].get("linkerParam")[jb]("=")[1];if("get"==b.method[yb]()){for(var d=b.childNodes||[],e=0;e<d[gb];e++)if("_ga"==d[e][db])return void d[e][cb]("value",c);d=Eb[bb]("input"),d[cb]("type","hidden"),d[cb]("name","_ga"),d[cb]("value",c),b.appendChild(d)}else"post"==b.method[yb]()&&(b.action=$d(a,b[tb]))}};Zd[hb].S=function(a,d,e){function f(e){try{e=e||Db.event;var f;a:{var h=e[nb]||e.srcElement;for(e=100;h&&e>0;){if(h[rb]&&h.nodeName[Z](/^a(?:rea)?$/i)){f=h;break a}h=h[wb],e--}f={}}("http:"==f[pb]||"https:"==f[pb])&&H(a,f[lb]||"")&&f[rb]&&b(f,$d(g,f[rb],d))}catch(i){c(26)}}var g=this;if(this.T||(this.T=!0,Ab(Eb,"mousedown",f,!1),Ab(Eb,"touchstart",f,!1),Ab(Eb,"keyup",f,!1)),e){e=function(b){if(b=b||Db.event,(b=b[nb]||b.srcElement)&&b[tb]){var c=b[tb][Z](Xd);c&&H(a,c[1])&&_d(g,b)}};for(var h=0;h<Eb.forms[gb];h++)Ab(Eb.forms[h],"submit",e)}};var ae,be,ce=function(a,b,c){var d=this;this.U=dd,this.aa=b,this.Y=c||ee(a);var e=a.get(md);a.set(md,function(a){a.get(d.U)||("1"==Hb(d.Y)[0]?a.set(d.U,"",!0):a.set(d.U,""+Vb(),!0));var b=e(a);return a.get(d.U)&&Ib(d.Y,"1",a.get(xd),a.get(wd),a.get(ud),6e5),b});var f=a.get(nd);a.set(nd,function(a){var b=f(a);return de(d,a),b})},de=function(a,b){if(b.get(a.U)){var c=new Cb,d=function(a){c.set(dc(a).p,b.get(a))};d(mc),d(nc),d(ud),d(sd),d(a.U),d(cd);var e=a.aa;"/"===e[X](0)&&(e=m()+e),c.map(function(a,b){e+=j(a)+"="+j(""+b)+"&"}),e+="z="+Vb(),h(e),b.set(a.U,"",!0)}},ee=function(a){return a.get(rd)&&"t0"!=a.get(rd)?"_dc_"+k(a.get(rd)):"_dc"};ae=new function(){this.V=100,this.fa=void 0,this.$=!1,this.ea=1},be=!1;var fe,ge=function(a,b){var d=a.b;if(!d.get("dcLoaded")){c(29),b=b||{};var e;b[vd]&&(e=k(b[vd]));var f="//stats.g.doubleclick.net/collect?t=dc&aip=1&";if("https:"!=Eb[kb][pb]&&!lc){var g=L(d.get(sd));(be||Hd(g))&&(f="https:"+f,c(33),be=!0)}new ce(d,f,e),d.set("dcLoaded",!0)}},he=function(){c(38)},ie=function(a,b,c){if(!fe){var d;d=Eb[kb][R];var e=Db[db],f=/^#?gaso=([^&]*)/;(e=(d=(d=d&&d[Z](f)||e&&e[Z](f))?d[1]:Hb("GASO")[0]||"")&&d[Z](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))&&(Ib("GASO",""+d,c,b,a,0),N._udo||(N._udo=b),N._utcp||(N._utcp=c),a=e[1],l("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(a?"prefix="+a+"&":"")+Vb(),"_gasojs")),fe=!0}},je=/^(UA|YT|MO|GP)-(\d+)-(\d+)$/,ke=function(a){function b(a,b){d.b[V].set(a,b)}function c(a,c){b(a,c),d.filters.add(a)}var d=this;this.b=new Xb,this.filters=new Ub,b(rd,a[rd]),b(ud,a[ud]),b(vd,a[vd]),b(wd,a[wd]||n()),b(xd,a[xd]),b(yd,a[yd]),b(zd,a[zd]),b(Ad,a[Ad]),b(Cd,a[Cd]),b(Dd,a[Dd]),b(Ed,a[Ed]),b(Fd,a[Fd]),b(Gd,a[Gd]),b(Bd,a[Bd]),b(td,a[td]),b(mc,1),b(nc,"j22"),c(ed,s),c(fd,x),c(gd,t),c(hd,z),c(id,Pd),c(jd,Qd),c(kd,r),c(ld,A),c(od,w),c(pd,y),c(md,u),c(nd,v),c(qd,Md(this)),le(this.b,a[sd]),me(this.b),this.b.set(oc,I()),ie(this.b.get(ud),this.b.get(wd),this.b.get(xd))},le=function(a,b){if("cookie"==$b(a,Bd)){Nd=!1;var d;a:{var e=Hb($b(a,vd));if(e&&!(1>e[gb])){d=[];for(var f=0;f<e[gb];f++){var g;g=e[f][jb](".");var h=g.shift();("GA1"==h||"1"==h)&&1<g[gb]?(h=g.shift()[jb]("-"),1==h[gb]&&(h[1]="1"),h[0]*=1,h[1]*=1,g={r:h,s:g[xb](".")}):g=void 0,g&&d[Q](g)}if(1==d[gb]){c(13),d=d[0].s;break a}if(0!=d[gb]){if(c(14),e=Ud($b(a,wd)),d=Sd(d,e,0),1==d[gb]){d=d[0].s;break a}e=Wd($b(a,xd)),d=Sd(d,e,1),d=d[0]&&d[0].s;break a}c(12)}d=void 0}d||(d=$b(a,wd),e=$b(a,zd)||n(),d=D("__utma",e,d),(d=void 0==d?void 0:d.O[1]+"."+d.O[2])&&c(10)),d&&(a[V].set(sd,d),Nd=!0)}d=a.get(Dd),(f=(d=Eb[kb][d?"href":"search"][Z]("(?:&|#|\\?)"+j("_ga")[U](/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"=([^&#]*)"))&&2==d[gb]?d[1]:"")&&(a.get(Cd)?(d=f[Y]("."),-1==d?c(22):(e=f[sb](d+1),"1"!=f[sb](0,d)?c(22):(d=e[Y]("."),-1==d?c(22):(f=e[sb](0,d),d=e[sb](d+1),f!=G(d,0)&&f!=G(d,-1)&&f!=G(d,-2)?c(23):(c(11),a[V].set(sd,d)))))):c(21)),b&&(c(9),a[V].set(sd,j(b))),a.get(sd)||((d=(d=Db.gaGlobal&&Db.gaGlobal.vid)&&-1!=d[mb](/^(?:utma\.)?\d+\.\d+$/)?d:void 0)?(c(17),a[V].set(sd,d)):(c(8),a[V].set(sd,[Vb()^2147483647&Lb(),P.round((new Date)[eb]()/1e3)][xb](".")))),Od(a)},me=function(a){var b=Db[vb],d=Db.screen,e=Eb[kb];if(a.set(uc,o(a.get(Gd))),e){var f=e.pathname||"";"/"!=f[X](0)&&(c(31),f="/"+f),a.set(tc,e[pb]+"//"+e[lb]+f+e[mb])}d&&a.set(zc,d.width+"x"+d.height),d&&a.set(yc,d.colorDepth+"-bit");var d=Eb.documentElement,h=(f=Eb.body)&&f[ib]&&f[qb],i=[];if(d&&d[ib]&&d[qb]&&("CSS1Compat"===Eb.compatMode||!h)?i=[d[ib],d[qb]]:h&&(i=[f[ib],f[qb]]),d=0>=i[0]||0>=i[1]?"":i[xb]("x"),a.set(Ac,d),a.set(Cc,C()),a.set(xc,Eb.characterSet||Eb.charset),a.set(Bc,b&&"function"==typeof b.javaEnabled&&b.javaEnabled()||!1),a.set(wc,(b&&(b.language||b.browserLanguage)||"")[yb]()),e&&a.get(Dd)&&(b=Eb[kb][R])){for(b=b[jb](/[?&#]+/),e=[],d=0;d<b[gb];++d)(g(b[d],"utm_id")||g(b[d],"utm_campaign")||g(b[d],"utm_source")||g(b[d],"utm_medium")||g(b[d],"utm_term")||g(b[d],"utm_content")||g(b[d],"gclid")||g(b[d],"dclid")||g(b[d],"gclsrc"))&&e[Q](b[d]);0<e[gb]&&(b="#"+e[xb]("&"),a.set(tc,a.get(tc)+b))}};ke[hb].get=function(a){return this.b.get(a)},ke[hb].set=function(a,b){this.b.set(a,b)};var ne={pageview:[vc],event:[Dc,Ec,Fc,Gc],social:[Hc,Ic,Jc],timing:[Sc,Tc,Vc,Uc]};ke[hb].send=function(){if(!(1>arguments[gb])){var a,b;"string"==typeof arguments[0]?(a=arguments[0],b=[][T][ob](arguments,1)):(a=arguments[0]&&arguments[0][pc],b=arguments),a&&(b=p(ne[a]||[],b),b[pc]=a,this.b.set(b,void 0,!0),this.filters.D(this.b),this.b[V].m={})}};var oe=function(a){return"prerender"==Eb.visibilityState?!1:(a(),!0)},pe=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,qe=function(a){if(d(a[0]))this.u=a[0];else{var b=pe.exec(a[0]);if(null!=b&&4==b[gb]&&(this.c=b[1]||"t0",this.e=b[2]||"",this.d=b[3],this.a=[][T][ob](a,1),this.e||(this.A="create"==this.d,this.i="require"==this.d,this.g="provide"==this.d,this.ba="remove"==this.d),this.i&&(3<=this.a[gb]?(this.X=this.a[1],this.W=this.a[2]):this.a[1]&&(f(this.a[1])?this.X=this.a[1]:this.W=this.a[1]))),b=a[1],a=a[2],!this.d)throw"abort";if(this.i&&(!f(b)||""==b))throw"abort";if(this.g&&(!f(b)||""==b||!d(a)))throw"abort";if(J(this.c)||J(this.e))throw"abort";if(this.g&&"t0"!=this.c)throw"abort"}},re={F:"/plugins/ua/",H:"plugins_",ca:["ec","ecommerce","linkid"],ga:function(){re.f=[],re.k=new Cb,re.Z=new Cb}};re.ga(),re.B=function(a,b,e){b==se?c(35):b.get(rd);var f=re.k.get(a);return d(f)?(b[re.H]=b[re.H]||new Cb,b[re.H].get(a)?!0:(b[re.H].set(a,new f(b,e||{})),!0)):!1},re.da=function(a){var b=a.a[0];if(!d(re.k.get(b))&&!re.Z.get(b)&&(a=a.X,!a&&q(re.ca,b)?(c(39),a=b+".js"):c(43),a)){a&&0<=a[Y]("/")||(a=m()+"//www.google-analytics.com"+re.F+a),a=K(a);var e=a[pb],f=Eb[kb][pb];(e="https:"==e||e==f?!0:"http:"!=e?!1:"http:"==f)&&(e=K(Eb[kb][rb]),a.G||0<=a.url[Y]("?")||0<=a.path[Y]("://")?e=!1:a[fb]==e[fb]&&a[ab]==e[ab]?e=!0:(e="http:"==a[pb]?80:443,e="www.google-analytics.com"==a[fb]&&(a[ab]||e)==e&&g(a.path,"/plugins/")?!0:!1)),e&&(l(a.url),re.Z.set(b,!0))}},re.C=function(a,b){re.k.set(a,b)},re.D=function(){var a=re.J[ub](re,arguments),a=re.f.concat(a);for(re.f=[];0<a[gb]&&!re.v(a[0])&&(a.shift(),!(0<re.f[gb])););re.f=re.f.concat(a)},re.J=function(){for(var a=[],b=0;b<arguments[gb];b++)try{var c=new qe(arguments[b]);c.g?re.C(c.a[0],c.a[1]):(c.i&&re.da(c),a[Q](c))}catch(d){}return a},re.v=function(a){try{if(a.u)a.u[ob](Db,se.j("t0"));else{var b=a.c==kc?se:se.j(a.c);if(a.A)"t0"==a.c&&se.create[ub](se,a.a);else if(a.ba)se.remove(a.c);else if(b)if(a.i){if(!re.B(a.a[0],b,a.W))return!0}else a.e&&(b=b[re.H].get(a.e)),b[a.d][ub](b,a.a)}}catch(c){}};var se=function(){c(1),re.D[ub](re,[arguments])};se.h={},se.P=[],se.L=0,se.answer=42;var te=[ud,wd,rd];se.create=function(){var a=p(te,[][T][ob](arguments));a[rd]||(a[rd]="t0");var b=""+a[rd];return se.h[b]?se.h[b]:(a=new ke(a),se.h[b]=a,se.P[Q](a),a)},se.remove=function(a){for(var b=0;b<se.P[gb];b++)if(se.P[b].get(rd)==a){se.P.splice(b,1),se.h[a]=null;break}},se.j=function(a){return se.h[a]},se.K=function(){return se.P[T](0)},se.N=function(){var a=Db[kc];if(!a||42!=a.answer){se.L=a&&a.l,se.loaded=!0;var b=Db[kc]=se;B("create",b,b.create,3),B("remove",b,b.remove),B("getByName",b,b.j,5),B("getAll",b,b.K,6),b=ke[hb],B("get",b,b.get,7),B("set",b,b.set,4),B("send",b,b[_],2),b=Xb[hb],B("get",b,b.get),B("set",b,b.set),(Db.gaplugins=Db.gaplugins||{}).Linker=Zd,b=Zd[hb],re.C("linker",Zd),B("decorate",b,b.Q,20),B("autoLink",b,b.S,25),re.C("displayfeatures",ge),re.C("adfeatures",he),a=a&&a.q,e(a)&&re.D[ub](se,a)}},function(){var a=se.N;if(!oe(a)){c(16);var b=!1,d=function(){!b&&oe(a)&&(b=!0,Bb(Eb,"visibilitychange",d))};Ab(Eb,"visibilitychange",d)}}()}(window),window.myXAlert=!1,Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var a=0,b=this.length;b>a;a++)this[a]&&this[a].parentElement&&this[a].parentElement.removeChild(this[a])},xAlert.prototype={init:function(){var a=this;a.setOverlay(),a.setPopup(),a.setButtons(),a.create()},create:function(){var a=this;$(".alert-wrapper").remove(),$(".alert-overlay").remove(),$("input").blur(),document.body.appendChild(a.overlay),document.body.appendChild(a.popup);for(var b=0;b<a.buttonsArray.length;b++)a.popup.querySelector(".alert-buttons").appendChild(a.buttonsArray[b]);a.disableScrolling()},destroy:function(){var a=this;document.body.removeChild(a.popup),document.body.removeChild(a.overlay),a.enableScrolling()},disableScrolling:function(){$("body").bind("touchmove",this.cancelTouchMove)},enableScrolling:function(){$("body").off("touchmove")},setOverlay:function(){var a=this;a.overlay=document.createElement("div"),a.overlay.className="alert-overlay";var b="background-image: -webkit-gradient(radial, 50% 50%, 0, 50% 50%, "+window.screen.width+", color-stop(0%, rgba(0, 0, 0, 0.00)), color-stop(100%, rgba(0, 0, 0, 0.55)));";b+="background-image: -moz-radial-gradient(center center, 50% 100%, rgba(0, 0, 0, 0.0) 0%, rgba(0, 0, 0, 0.55) 100%);",b+="background-image: -webkit-gradient(radial, 50% 50%, 0, 50% 50%, 114, color-stop(0%, rgba(0, 0, 0, 0.55)), color-stop(100%, rgba(0, 0, 0, 0.55)));",b+="background-image: -webkit-radial-gradient(center center, 100% 100%, rgba(0, 0, 0, 0.00) 0%, rgba(0, 0, 0, 0.55) 100%);",b+="background-image: -moz-radial-gradient(center center, 100% 100%, rgba(0, 0, 0, 0.00) 0%, rgba(0, 0, 0, 0.55) 100%);",b+="background-image: -ms-radial-gradient(center center, 100% 100%, rgba(0, 0, 0, 0.00) 0%, rgba(0, 0, 0, 0.55) 100%);",b+="background-image: -o-radial-gradient(center center, 100% 100%, rgba(0, 0, 0, 0.00) 0%, rgba(0, 0, 0, 0.55) 100%);",b+="background-image: radial-gradient(100% 100% at center center, rgba(0, 0, 0, 0.00) 0%, rgba(0, 0, 0, 0.55) 100%);",a.overlay.setAttribute("style",b)},setPopup:function(){var a=this;a.popup=document.createElement("div"),a.popup.className="alert-wrapper";var b='	<div class="alert-vertical-center">';b+='	<div class="alert">',b+='	<div class="highlight">',b+="	</div>",b+='	<div class="alert-content">',b+='		<div class="alert-title">',b+="			"+a.title,b+="		</div>",b+="		"+a.content,b+='		<div class="alert-buttons">',b+="		</div>",b+="	</div>",b+="	</div>",b+="	</div>",a.popup.innerHTML=b},clickButton:function(a){this.buttonsArray[a].click()},setButtons:function(){var a=this;a.buttonsArray=[];for(var b=a.buttons.length,c=0;b>c;c++){var d=document.createElement("div"),e=b>1&&"horizontal"==a.orientation?(100-(b-1))/b:100;d.className="alert-button",d.className+=a.mainButtons[c]?" main":"",d.style.width=e+"%",d.innerHTML=a.buttons[c],d.setAttribute("data-buttonNumber",c+1),d.addEventListener("click",function(){a.callback(this.getAttribute("data-buttonNumber")),a.destroy()}),a.buttonsArray.push(d)}}};
var app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){app.receivedEvent("deviceready")},receivedEvent:function(a){console.log("Received Event: "+a)}};window.onerror=function(a,b,c){console.log("SCError: "+a+" in "+b+" at line "+c)};var checkPhoneGap=function(){return"undefined"!=typeof cordova||"undefined"!=typeof phonegap},isPhoneGap=checkPhoneGap(),testing=!1,testRequestID=112669,testPhoneNumber="(301) 704-7437",skipAPICalls=!1,testingType="",environment="local",root,api_root,mapsLoaded=!1,appOptions={analytics:{gaStorageName:"sc_clientId",gaIDs:{"Seva Call Mobile App":"UA-51774414-1","Seva Call Mobile Web":"UA-52209319-1"},eventTypes:{1:"page",2:"interaction",3:"alert"}}},alerts={call_companies:{body:"Call companies now? You may receive up to three calls"},home:{title:"Start Over?",body:"Returning to step 1 will cancel your current request, continue?"},abandon:{title:"Start Over?",body:"Are you sure you want to abandon this request?"}};"local"!=environment||isPhoneGap?"local"==environment&&isPhoneGap?(root="",api_root="http://test.s17.sevacall.com/"):"development"==environment?(root=isPhoneGap?"":"http://test.s17.sevacall.com/mobile/",api_root="http://test.s17.sevacall.com/"):"production"==environment&&(console.log=function(){},console.warn=function(){},console.error=function(){},root="",api_root=isPhoneGap?"http://www.sevacall.com/":"../"):(root="../../",api_root="http://localhost/"),String.prototype.capitalize=function(){return this.toLowerCase().replace(/^.|\s\S/g,function(a){return a.toUpperCase()})};var myApp=angular.module("myApp",["myApp.services","myApp.directives","myApp.controllers","ui.router","ngAnimate","ngStorage"]).factory("MyInterceptor",["$q","$rootScope","$injector","$timeout","Overlay","Track",function(a,b,c,d,e,f){var g=0,h=function(b){var d=function(){f.event(3,"alert_internet_failed")};return b.then(function(b){if(console.log("*--*Http Wrapper Success Response: ",b),b.data&&"string"==typeof b.data&&-1!=b.data.indexOf("DOCTYPE")){var f=a.defer();return d(),new xAlert("Verify you are connected to the internet and retry.",function(d){if(1==d){var f=c.get("$http");return f(b.config)}e.remove(),a.reject("rejected")},"Connection Error","Retry, Cancel"),f.promise}return console.log("*Response was valid and we're connected to the internet... returning"),b},function(b){if(console.log("-*-Http wrapper error response: ",b),500==b.status,g>=2){g=0;var f=a.defer();return d(),new xAlert("Verify you are connected to the internet and retry.",function(d){if(1==d){var f=c.get("$http");return f(b.config)}e.remove(),a.reject("rejected")},"Connection Error","Retry, Cancel"),f.promise}g++;var h=c.get("$http");return h(b.config)})};return h}]).config(["$httpProvider",function(a){a.responseInterceptors.push("MyInterceptor")}]).config(["$httpProvider",function(a){a.defaults.transformRequest=function(a){return void 0===a?a:$.param(a)}}]).config(["$httpProvider",function(a){a.responseInterceptors.push(["$q","$rootScope",function(a,b){return function(c){return b.$broadcast("event:routeChangeStart"),c.then(function(a){return b.$broadcast("event:routeChangeSuccess"),a},function(c){return b.$broadcast("event:routeChangeError"),a.reject(c)})}}])}]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/step1");var c={name:"step1",url:"/step1",controller:"step1Controller",templateUrl:root+"views/home.html"},d={name:"step2",url:"/step2",controller:"step2Controller",templateUrl:root+"views/step2.html",resolve:{resolveAPI:["Overlay","$q","SCAPI","$location","Request",function(a,b,c,d,e){if(e.id)return!0;var f=b.defer();return a.add(1),c.step1().then(function(b){"Invalid Location"==b&&(console.log("-*-Invalid step 2"),d.path("/")),a.remove(),f.resolve(b)}),f.promise}]}},e={name:"step3",url:"/step3",controller:"step3Controller",templateUrl:root+"views/step3.html"},f={name:"recording",url:"/recording",controller:"recordingController",templateUrl:root+"views/recording.html"},g={name:"timetable",url:"/timetable",controller:"timeTableController",templateUrl:root+"views/timetable.html"},h={name:"step2a",url:"/step2a",controller:"step2aController",templateUrl:root+"views/step2a.html"},i={name:"settings",url:"/settings",controller:"step2aController",templateUrl:root+"views/step2a.html"},j={name:"information",url:"/information",controller:"informationController",templateUrl:root+"views/information.html",resolve:{resolveSize:[function(){var a=$(".ui-view-container").width(),b=parseInt(a/16*9)+2,c={height:b+"px","max-height":"400px"};return 400>b?c={width:"100%"}:(b=400,a=b/9*16,c={width:a+"px"}),[b,a,c]}]}},k={name:"summary",url:"/summary",controller:"summaryController",templateUrl:root+"views/summary.html"};a.state(c),a.state(d),a.state(e),a.state(f),a.state(k),a.state(g),a.state(h),a.state(i),a.state(j)}]).run(["Storage","SCAPI","Request","$rootScope","Menu","$state","$urlRouter","$window","$location","Nav","AlertSwitch",function(a,b,c,d,e,f,g,h,i,j,k){FastClick.attach(document.body),d.$on("requestCompleted",[function(){f.go("summary")}]),d.$on("$stateChangeStart",function(a,b){function d(){console.log("*-*Preventing default change on state change Menu Button"),a.preventDefault();var d=function(){c.reset(),f.go(b.name),g.sync()};return k.on?(new xAlert(alerts.abandon.body,function(a){1==a&&d()},alerts.abandon.title,"Yes, Cancel"),!1):void d()}return console.log("-Going to state: "+b.name),"step2"!=b.name&&"step3"!=b.name||c.id||i.path("/step1"),c.id&&!c.complete&&"step1"==b.name?d():(e.close(),void console.log("*Menu closed"))}),d.$on("$locationChangeStart",function(a,b){function d(){return console.log("*-*Preventing default change on location change Back Button"),a.preventDefault(),k.on?(new xAlert(alerts.abandon.body,function(a){1==a&&e()},alerts.abandon.title,"Yes, Cancel"),!1):void e()}var e=function(){c.reset(),f.go("step1"),g.sync()};return c.id&&!c.complete&&-1!=b.indexOf("step1")?d():void(-1==b.indexOf("step3")&&-1==b.indexOf("step2")||c.id||i.path("/step1"))})}]).filter("orderObjectBy",[function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){return a[b]>c[b]}),c&&d.reverse(),d}}]).filter("reverse",[function(){return function(a){return a.slice().reverse()}}]);if(myApp.factory("SCAPI",["Times","Recording","$timeout","User","$http","$q","Track",function(a,b,c,d,e,f,g){var h={init:function(a){this.Request=a},busy:!1,urls:{step1:api_root+"api/mobile/v2/searchAction1.php",getCompaniesList:api_root+"api/mobile/v2/getCompaniesList.php",seachAction3:api_root+"api/mobile/v2/searchAction3.php",getRequestStatus:api_root+"api/mobile/v4/request/status",getYelpRating:api_root+"api/mobile/v2/getRating.php?source=yelp",getCitysearchRating:api_root+"api/mobile/v2/getRating.php?source=citysearch",getGoogleRating:api_root+"api/mobile/v2/getRating.php?source=google",getRating:api_root+"api/mobile/v2/getRating.php",timeSaved:api_root+"api/mobile/v4/request/time_saved"},data:{key:"tmp",boxType:"get",demoNumber:"3018764913"},step1:function(){var a=this,b=f.defer();a.data.category_short=a.Request.category,a.data.search_location=d.zipcode;var c=a.postifyUrl(a.urls.step1);return e({url:c,method:"GET",headers:{"Content-Type":"application/json"}}).success(function(c){a.busy=!1;var d=c.split("|");a.Request.setID(d[1]),console.log("*-*Set Request ID For SCAPI to: "+a.Request.id+"*-*"),b.resolve(c)}).error(function(){a.busy=!1,b.reject(!1)}),b.promise},getCompaniesList:function(){var a=this,b=a.postifyUrl(a.urls.getCompaniesList),c=f.defer();return e({url:b,method:"GET",headers:{"Content-Type":"application/json"}}).success(function(b){var d=b.split("|"),e=d.length-1;console.log("*Retrieved "+e+" companies in the CompanyList:"),e&&g.event("notify","notify_company_list_success");for(var f=0;e>f;f++){console.log("*CompanyNodes: "+d);var h=d[f].split("^~^");a.Request.companies[h[0]]=new Object({name:h[1],id:h[0],lat:h[2],lon:h[3],addr:h[4],city:h[5].capitalize(),state:h[6],zip:h[7],phone:h[8],markerNumber:f+1,status:"none",marker:new Object,infoBox:new Object,infoBoxEvent:function(){},ratingYelp:0,isYelpLoaded:0,numRatingsYelp:"",ratingCitysearch:0,isCitysearchLoaded:!1,numRatingsCitysearch:"",ratingGoogle:0,isGoogleLoaded:0,numRatingsGoogle:"",reviewsLoaded:0,reviewsHTML:"",accepted:0,visible:0,acceptedOrder:0})}console.log("*Companies for this request are:",a.Request.companies),c.resolve(b)}).error(function(a){console.log("*GetCompaniesList error:",a),c.resolve(a)}),c.promise},postifyUrl:function(a){var c=this;window.device&&window.device.platform&&(c.data.medium=window.device.platform),c.data.description=b.saved?"Describe what you need help with in as much detail as possible...":c.Request.description,c.data.requestID=c.Request.id;var d=a+"?"+$.param(c.data);return d},postifyUser:function(){var a=angular.copy(d.phone);a=String(parseInt(a.replace(/[)( -]/g,"")));var b=a.substring(0,3),c=a.substring(3,6),e=a.substring(6,10),f={name:d.name,email:d.email,phone1:b,phone2:c,phone3:e};return $.param(f)},generateURL:function(b){var c,d=this;return"searchAction3"==b&&(c=d.postifyUrl(d.urls.seachAction3)+"&"+d.postifyUser()+a.postify()),c},searchAction3:function(){var a=this;a.data.requestID=a.Request.id;var b=f.defer(),d=a.generateURL("searchAction3");return testing?c(function(){b.resolve(!0)},2e3):e({url:d,method:"GET",headers:{"Content-Type":"application/json"}}).success(function(a){b.resolve(a)}).error(function(a){b.resolve(a)}),b.promise},timeSaved:function(){var a=this;a.data.requestID=a.Request.id;var b=a.postifyUrl(a.urls.timeSaved),c=f.defer();return e({url:b,method:"GET",headers:{"Content-Type":"application/json"}}).success(function(a){c.resolve(a.data)}).error(function(a){console.log("*TimeSaved error:",a),c.resolve(a)}),c.promise},setRequestStatus:function(a){this.Request.setStatuses(a)},getRequestStatus:function(){var a=this,b=a.postifyUrl(a.urls.getRequestStatus),c=f.defer();return a.Request.requestStatusOverride?c.resolve(a.Request.requestStatusOverride.data):e({url:b,method:"GET",headers:{"Content-Type":"application/json"}}).success(function(a){c.resolve(a.data)}).error(function(a){console.log("*GetRequestStatus error:",a),c.resolve(a)}),c.promise},getRatings:function(a){function b(){var b={companyName:a.name,companyZipcode:a.zip,companyPhone:a.phone};return $.param(b)}function c(a){var c=f.defer(),d=g.urls.getRating+"?source="+a+"&"+b();return e({url:d,method:"GET",headers:{"Content-Type":"application/json"}}).success(function(a){c.resolve(a);{var b=a.split("|");b[0],b[1]}}).error(function(a){console.log("*GetRating error: "+a)}),c.promise}function d(){i++,3==i&&h.resolve(!0)}var g=this,h=f.defer(),i=0;return c("yelp").then(function(b){var c=b.split("|");a.ratingYelp=c[0]>0?c[0]:0,a.numRatingsYelp=c[1],a.yelpStarOffset=-4.66+12.66*c[0],a.isYelpLoaded=1,d()}),c("citysearch").then(function(b){var c=b.split("|"),e=b[0];e=Math.floor(e)+(Math.round(e-Math.floor(e))?.5:0),a.ratingCitysearch=e;var f=-4.66+12.66*e;a.citysearchStarOffset=f,a.numRatingsCitysearch=c[1],a.isCitysearchLoaded=1,d()}),c("google").then(function(b){var c=b.split("|");a.ratingGoogle=c[0]>0?c[0]:0,a.googleStarOffset=-4.66+12.66*c[0],a.numRatingsGoogle=c[1],a.isGoogleLoaded=1,d()}),h.promise}};return h}]),myApp.factory("Test",["RequestSubmittor","$q","Times","User","Request","SCAPI","Recording","$state","$timeout","AlertSwitch",function(a,b,c,d,e,f,g,h,i,j){var k=function(){};return k.prototype={requestStatusOverrides:{one:'{"status":"success","data":[{"requestStatusID":"1876989","requestStatus":"ONE Thomas Plumbing Co Called ","companyID":"495861","requestStatusShort":"Calling"},{"requestStatusID":"1876990","requestStatus":"O\'Neill Plumbing Called ","companyID":"495866","requestStatusShort":"Calling"},{"requestStatusID":"1876991","requestStatus":"Geeks On-site Called ","companyID":"11930881","requestStatusShort":"Calling"},{"requestStatusID":"1876992","requestStatus":"Thomas Plumbing Co -... Called ","companyID":"12013570","requestStatusShort":"Calling"},{"requestStatusID":"1876993","requestStatus":"Thomas Plumbing Co Answered ","companyID":"495861","requestStatusShort":"Answered"},{"requestStatusID":"1876994","requestStatus":"Thomas Plumbing Co -... Answered ","companyID":"12013570","requestStatusShort":"Answered"},{"requestStatusID":"1876995","requestStatus":"O\'Neill Plumbing Answered ","companyID":"495866","requestStatusShort":"Answered"},{"requestStatusID":"1876996","requestStatus":"Geeks On-site Answered ","companyID":"11930881","requestStatusShort":"Answered"},{"requestStatusID":"1876997","requestStatus":"O\'Neill Plumbing Call Completed ","companyID":"495866","requestStatusShort":"Hung Up"},{"requestStatusID":"1876998","requestStatus":"Thomas Plumbing Co -... Call Completed ","companyID":"12013570","requestStatusShort":"Hung Up"},{"requestStatusID":"1876999","requestStatus":"Thomas Plumbing Co Call Completed ","companyID":"495861","requestStatusShort":"Hung Up"},{"requestStatusID":"1877000","requestStatus":"Geeks On-site Call Completed ","companyID":"11930881","requestStatusShort":"Hung Up"},{"requestStatusID":"1877001","requestStatus":"Request Completed","companyID":"0","requestStatusShort":"Completed"}]}',two:'{"status":"success","data":[{"requestStatusID":"1876989","requestStatus":"Thomas Plumbing Co Called ","companyID":"495861","requestStatusShort":"T2 Calling"},{"requestStatusID":"1876990","requestStatus":"TESTING TWO O\'Neill Plumbing Called ","companyID":"495866","requestStatusShort":"T2 Calling"},{"requestStatusID":"1876991","requestStatus":"TESTING TWO Geeks On-site Called ","companyID":"11930881","requestStatusShort":"T2 Calling"},{"requestStatusID":"1876992","requestStatus":"TESTING TWO Thomas Plumbing Co -... Called ","companyID":"12013570","requestStatusShort":"T2 Calling"},{"requestStatusID":"1876993","requestStatus":"Thomas Plumbing Co Answered ","companyID":"495861","requestStatusShort":"T2 Answered"},{"requestStatusID":"1876994","requestStatus":"Thomas Plumbing Co -... Answered ","companyID":"12013570","requestStatusShort":"T2 Answered"},{"requestStatusID":"1876995","requestStatus":"TESTING TWO O\'Neill Plumbing Answered ","companyID":"495866","requestStatusShort":"T2 Answered"},{"requestStatusID":"1876996","requestStatus":"TESTING TWO Geeks On-site Answered ","companyID":"11930881","requestStatusShort":"T2 Answered"},{"requestStatusID":"1876997","requestStatus":"TESTING TWO O\'Neill Plumbing Call Completed ","companyID":"495866","requestStatusShort":"T2 Hung Up"},{"requestStatusID":"1876998","requestStatus":"TESTING TWO Thomas Plumbing Co -... Call Completed ","companyID":"12013570","requestStatusShort":"T2 Hung Up"},{"requestStatusID":"1876999","requestStatus":"TESTING TWO Thomas Plumbing Co Call Completed ","companyID":"495861","requestStatusShort":"T2 Hung Up"},{"requestStatusID":"1877000","requestStatus":"Geeks On-site Call Completed ","companyID":"11930881","requestStatusShort":"T2 Hung Up"},{"requestStatusID":"1877001","requestStatus":"Request Completed","companyID":"0","requestStatusShort":"Completed"}]}'},test1:function(){g.saved=!0,d.setZipcode("20861"),e.setCategory("Test Spin"),c.timesActive=["4-1","2-3"],c.buttons={now:!0};var a=f.generateURL("searchAction3");console.log("*SearchAction3 Test URL: "+a)},test2:function(){var a=function(a){a.root.getFile("sc_recording3.wav",{create:!0,exclusive:!1},function(a){console.log("*****SOURCE: "+a.fullPath),g.src=a.toURL(),g.mediaRec=new Media(g.src,function(){alert("OK")},function(a){console.log("MediaError callback code: "+a.code),console.log("MediaError callback message: "+a.message),alert("NOT OK")},function(){}),g.mediaRec.startRecord(),alert("RECORDING"),window.setTimeout(function(){g.mediaRec.stopRecord()},1e3),window.setTimeout(function(){alert("PLAYING"),g.mediaRec.release();var a=new Media(g.src);a.play()},1500)},function(){alert("fail")})};window.requestFileSystem(LocalFileSystem.TEMPORARY,0,a,function(){})},setTestParams:function(){skipAPICalls=!0,d.setZipcode("20010"),e.setCategory("Test Spin"),c.timesActive=["4-1","2-3"],c.buttons={now:!0},d.setName("Augie Testing Via Test Service"),d.setEmail("Augie@a.co"),d.setPhone("3017047437")},test3:function(){var b=this;this.setTestParams(),j.turnOff(),e.setID(testRequestID),e.setRequestStatusOverride(b.requestStatusOverrides.two),a.step1().then(a.step2().then(function(){i(function(){h.go("step1"),i(function(){e.setRequestStatusOverride(b.requestStatusOverrides.one),a.step1().then(a.step2())},1e3)},1e3)}))}},new k}]),angular.module("myApp.services",[]),myApp.factory("App",[function(){var a={loaded:!1};return a}]),myApp.factory("AnimationService",[function(){var a={initialized:!1,init:function(){this.initialized=!0}};return a}]),myApp.factory("RecordingModal",["Storage","$timeout",function(a,b){var c={active:!1,removing:!1,removed:!1,hasBeenActive:!1,message:"Click here to record your description.",show:function(){this.hasBeenActive||(this.active=!0),this.hasBeenActive=!0},hide:function(){var c=this;c.removing=!0,c.active=!1,b(function(){c.removed=!0},500),a.recordingModalDismissed=!0,a.set()}};return c}]),myApp.factory("AlertSwitch",[function(){var a={on:!0,turnOff:function(){this.on=!1},turnOn:function(){this.on=!0}};return a}]),myApp.factory("Track",[function(){var a=appOptions.analytics.gaIDs,b={init:function(){if(window.localStorage){var b,c,d;window.device&&window.device.uuid?(b=window.device.uuid,c=a["Seva Call Mobile App"],d="Mobile App",console.log("setting localStorage.clientId to: "+b),window.localStorage.setItem(appOptions.analytics.gaStorageName,b)):(c=a["Seva Call Mobile Web"],d="Mobile Web",window.localStorage.getItem(appOptions.analytics.gaStorageName)?b=window.localStorage.getItem(appOptions.analytics.gaStorageName):(b=Math.round(2147483647*Math.random()),console.log("setting localStorage.clientId to: "+b),window.localStorage.setItem(appOptions.analytics.gaStorageName,b))),console.log("tracking to: "+d+" with client id: "+window.localStorage.getItem(appOptions.analytics.gaStorageName)),ga("create",c,{storage:"none",clientId:window.localStorage.getItem(appOptions.analytics.gaStorageName)}),ga(function(a){console.log("google tracker returned client id: "+a.get("clientId"))})}else ga("create",c,"www.sevacall.com");ga("send","pageview",{page:"step1"})},defaults:{event:{hitType:"event",eventCategory:"sc-action",eventAction:"none"}},page:function(a){var b={hitType:"pageview",page:a};console.log("--> TRACK_PAGEVIEW_: "+a.toUpperCase()),ga("send",b)},event:function(){var a=appOptions.analytics.eventTypes,b={};1==arguments.length&&"object"==typeof arguments[0]&&(b=arguments[0]),2==arguments.length?(b.eventCategory=a[arguments[0]],b.eventAction=arguments[1]):(b.eventCategory="notify",b.eventAction=arguments[0]);var c=this.defaults.event,d=$.extend({},c,b);d.eventAction=d.eventAction.toUpperCase();var e;window.localStorage&&(e=window.localStorage.getItem(appOptions.analytics.goStorageName)),console.log(" --> TRACK ACTION: "+d.eventAction.toUpperCase()),ga("send",d)}};return b}]),myApp.factory("MapLoader",["$window","$q",function(a,b){var c={busy:!1,loaded:!1,loadMaps:function(){var c=this;return c.deferred=b.defer(),c.busy?(console.log("*loadMaps was busy, waiting..."),c.deferred.reject()):c.loaded?(console.log("*loadMaps was loaded, resolving"),c.deferred.resolve()):(c.busy=!0,a.loadMapsPlugins=function(){$.getScript("scripts/other/infobox.js").done(function(){$.getScript("scripts/other/xMarker.js").done(function(){c.loaded=!0,c.busy=!1,c.deferred.resolve(!0)}).fail(function(){c.busy=!1,console.log("*getScript xMarker failed"),c.deferred.reject(!1)})}).fail(function(){console.log("*getScript infoBox failed"),c.busy=!1,c.deferred.reject(!1)})},$.getScript("http://maps.google.com/maps/api/js?v=3.13&key=AIzaSyBHtVxQeYDw2uzrMXpbkqnfqkftcjo-B3Y&sensor=false&callback=loadMapsPlugins").done(function(a,b){console.log("*Get google maps textStatus is: "+b),("object"!=typeof window.google||"object"!=typeof window.google.maps)&&(c.busy=!1,c.deferred.reject(!1))}).fail(function(){c.busy=!1,c.deferred.reject(!1)})),c.deferred.promise}};return c}]),myApp.factory("Splash",["$q",function(a){var b={intervalLength:400,images:{iphone4:["images/splash-iphone4-1.jpg","images/splash-iphone4-2.jpg","images/splash-iphone4-3.jpg","images/splash-iphone4-4.jpg"],iphone5:["images/splash-iphone5-1.jpg","images/splash-iphone5-2.jpg","images/splash-iphone5-3.jpg","images/splash-iphone5-4.jpg"]},remove:function(){clearInterval(this.blipInterval),navigator.splashscreen&&navigator.splashscreen.hide(),$("#splashscreen").hide()},blip:function(){var b,c,d=a.defer(),e=0,f=this;return device&&"iOS"==device.platform?(screen.height<=480?(b=document.getElementById("splashImg-iPhone4"),c=this.images.iphone4):(b=document.getElementById("splashImg-iPhone5"),c=this.images.iphone5),b.style.left=0,this.blipInterval=setInterval(function(){0==e?(b.src=c[0],navigator.splashscreen&&navigator.splashscreen.hide()):e==c.length?(f.remove(),d.resolve(!0)):b.src=c[e],e++},f.intervalLength)):(navigator.splashscreen.hide(),f.remove(),d.resolve(!0)),d.promise}};return b}]),myApp.factory("Nav",[function(){var a={direction:"back",reset:function(){this.direction="back"}};return a}]),myApp.factory("Menu",["$timeout",function(a){var b={active:!1,busy:!1,toggle:function(){var b=this;if(!b.busy){a(function(){b.busy=!1},500),b.busy=!0;{$("#menu")[0].offsetHeight}b.active?b.close():b.active=!0}},close:function(){var b=this;b.active&&(b.busy=!0,a(function(){b.busy=!1},500),this.active=0)}};return b}]),myApp.factory("Ratings",["Request",function(){var a={getRating:function(a){api_root+"api/mobile/v2/getRating.php?source="+source+"&companyName="+encodeURIComponent(a.name)+"&companyZipcode="+encodeURIComponent(a.zip)+"&companyPhone="+encodeURIComponent(a.phone)}};return a}]),myApp.factory("GoogleMap",["$timeout","$q","Request",function(a,b,c){var d={bounds:[],latLngList:[],init:function(){function a(){var a=b.defer(),c=new google.maps.Geocoder;return c.geocode({address:"20854"},function(b,c){c==google.maps.GeocoderStatus.OK&&a.resolve(b[0].geometry.location)}),a.promise}function d(){var d=b.defer();return a().then(function(a){var b={center:a,zoom:8};e.map=new google.maps.Map(document.getElementById("map_canvas"),b),c.GoogleMap=e,google.maps.event.addListener(e.map,"idle",function(){$("style").remove()}),d.resolve(!0)}),d.promise}var e=this;d().then(function(){e.mapFitBounds(),e.addMarkers()})},mapFitBounds:function(){var a=this;a.LatLngList=new Array,a.bounds=new google.maps.LatLngBounds;for(var b in c.companies){var d=new google.maps.LatLng(c.companies[b].lat,c.companies[b].lon);a.LatLngList.push(d),a.bounds.extend(d)}var e=10;a.map.initialZoom=!0,google.maps.event.addListener(a.map,"zoom_changed",function(){var b=google.maps.event.addListener(a.map,"bounds_changed",function(){this.getZoom()>e&&1==this.initialZoom&&(this.setZoom(e),this.initialZoom=!1),google.maps.event.removeListener(b)})}),a.map.fitBounds(a.bounds)},setInfoBox:function(a){var b,c=this,d="",e=a.name,f=(a.status,a.name),g=a.city+", "+a.state;b="none"==a.status?"":"<div class='SCMapInfoBox-company'>"+e+"</div>","none"!=a.status?(d='			<div class="SCMapInfoBox-icon '+a.status.toLowerCase().replace(" ","")+'">	',d+="			</div>",f=a.status):f=a.name;var h='									<table class="SCMapInfoBox clearfix">										<tbody>											<tr>												<td>													'+d+'												</td>												<td>													<div class="SCMapInfoBox-status">														'+f+"													</div>													"+b+'													<div class="SCMapInfoBox-location">														'+g+"													</div>												</td>											</tr>										</tbody>									</table>									",i=c.getInfoBoxDimensions(h),j=i[0],k=(i[1],0);k="none"==a.status?-100:-115;var l=104-j/2;c.infoBox.setOptions({disableAutoPan:!0,boxStyle:{whiteSpace:"nowrap"},content:h,zIndex:null,pixelOffset:new google.maps.Size(l,k),infoBoxClearance:new google.maps.Size(-80,50),isHidden:!1,enableEventPropagation:!1}),c.infoBox.open(c.map,a.marker);var m=c.infoBox.getPosition();google.maps.Map.prototype.panToWithOffset=function(a,b,c){var d=this,e=new google.maps.OverlayView;e.onAdd=function(){var e=this.getProjection(),f=e.fromLatLngToContainerPixel(a);f.x=f.x+b,f.y=f.y+c,d.panTo(e.fromContainerPixelToLatLng(f))},e.draw=function(){},e.setMap(this)},c.map.panToWithOffset(m,0,-30)},getInfoBoxDimensions:function(a){var b=$("<div>").html(a);$(b).appendTo("body").css({position:"absolute",left:"-9999px",top:"-9999px"});var c=$(b).width(),d=$(b).height();return $(b).remove(),new Array(c,d)},addMarkers:function(){{var a=this;new google.maps.Marker({position:new google.maps.LatLng(-25.363882,131.044922),map:a.map,title:"Hello World!"})}a.infoBox=new InfoBox;for(var b in c.companies)console.log("*Setting marker for company: "+c.companies[b].name+" at ("+c.companies[b].lat+", "+c.companies[b].lon+")"),c.companies[b].marker=new xMarker(new google.maps.LatLng(c.companies[b].lat,c.companies[b].lon),a.map,c.companies[b],c.companies[b].markerNumber),google.maps.event.addListener(c.companies[b].marker,"click",function(){a.setInfoBox(this.company)});document.addEventListener("click",function(){a.infoBox.close()},!0)}};return d}]),myApp.factory("Times",[function(){var a={timesActive:[],timesInactive:[],buttons:{},dates:[],hourOfDay:(new Date).getHours(),year:(new Date).getFullYear(),init:function(){this.setDays()},postify:function(){var a="";this.buttons.now?a+="&box41=now":this.buttons.anytime&&(a+="&box41=anytime");for(var b=0;b<this.timesActive.length;b++){var c=this.timesActive[b].replace("-","").split("").reverse().join(""),d=c[1]-1;a+="&box"+c+"="+this.dates[d].toString}return a},isFull:function(){var a=this.buttons.now?1:0;return this.timesActive.length+a>=5},fullAlert:function(){new xAlert("Please select a maximum of 5 times")},isEmpty:function(){function a(){for(var a in b.buttons)if(0!=b.buttons[a])return!1;return console.log("true"),!0}var b=this;return 0==this.timesActive.length&&a()},empty:function(){return this.buttons={},this.timesActive=[],this},changeTime:function(a){return"now"==a&&1==this.buttons.anytime&&(this.buttons.anytime=0),"now"==a&&this.isFull()&&!this.buttons.now?(this.fullAlert(),!1):"pick_time"==a?(this.buttons.pick_time=1,this.buttons.anytime=0,!0):(this.buttons[a]=!this.buttons[a],"anytime"==a&&1==this.buttons.anytime&&(this.empty(),this.buttons={anytime:1}),void("pick_time"==a&&1==this.buttons.pick_time&&(this.buttons.anytime=0)))},find:function(a,b){return-1!=this.timesActive.indexOf(a+"-"+b)},findInactive:function(a,b){return-1!=this.timesInactive.indexOf(a+"-"+b)},setDays:function(){function a(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}for(var b=this,c=new Date,d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e=0;7>e;e++){var f=new Date;f.setDate(c.getDate()+e);var g=d[f.getUTCDay()],h=a(f.getUTCDate(),2),i=a(f.getUTCMonth()+1,2),j={day:g,date:h,month:i,toString:this.year+"-"+i+"-"+h};b.dates.push(j)}b.hourOfDay>=11&&b.timesInactive.push("1-1"),b.hourOfDay>=15&&b.timesInactive.push("1-2"),b.hourOfDay>=19&&b.timesInactive.push("1-3")},toggleTime:function(a,b){if(this.findInactive(a,b))return!1;console.log("*Toggling time:"+a+"-"+b);var c=this.timesActive.indexOf(a+"-"+b);if(-1!=c||this.isFull()){if(-1==c&&this.isFull())return this.fullAlert(),!1;this.timesActive.splice(c,1),0==this.timesActive.length&&(this.buttons.pick_time=!1)}else this.timesActive.push(a+"-"+b)}};return a.init(),a}]),myApp.factory("Request",["Recording","$rootScope","SCAPI","$interval","$http","$q","Times","Uploader",function(a,b,c,d,e,f,g,h){var i={initialized:!1,companies:{},statuses:[],statusThrottle:[],numCompaniesAccepted:0,numCompaniesCalled:0,numCompaniesRejected:0,processing:!1,complete:!1,isDescriptionValid:function(){if(this.description){var a=/\b[^\s]+\b/g,b=this.description.match(a);if(b&&b.length>=7&&"Describe what you need help with in as much detail as possible..."!=self.description)return!0}return!1},reset:function(){g.empty(),a.reset(),h.reset(),this.pingStatusesStop(),this.verifiedTimeoutStop(),this.description="",this.id=!1,this.statuses=[],this.statusThrottle=[],this.numCompaniesCalled=0,this.numCompaniesRejected=0,this.numCompaniesAccepted=0,this.companies={},this.processing=!1,this.complete=!1},addCompany:function(){},getID:function(){return this.id},getCompanies:function(){return this.companies},getStatus:function(){return this.status},getDescription:function(){return this.description},setID:function(a){this.id=a},verifiedTimeoutStart:function(){var a=this;a.timeSpentWaiting=0,a.verifiedTimeout=d(function(){a.timeSpentWaiting++,60==a.timeSpentWaiting?new xAlert("To ensure the highest quality matches your request needs to be verified, which may take up to 15 minutes. If you need service right away please call us at 1-877-987-SEVA (7382)"):900==a.timeSpentWaiting&&new xAlert("We're sorry, but your request was unsuccessful.  If you still need service you may try again, or call us at 1-877-987-SEVA (7382)")},1e3)},verifiedTimeoutStop:function(){this.timeSpentWaiting=0,d.cancel(this.verifiedTimeout)},setRequestStatusOverride:function(a){var b=this;b.requestStatusOverride=-1==a?0:$.parseJSON(a)},pingStatusesStart:function(){var a=this;i.processing=!0,a.verifiedTimeoutStart(),a.interval=d(function(){c.getRequestStatus().then(function(b){if(a.setStatusThrottle(b),a.statusThrottle.length>0&&!$.isEmptyObject(a.companies)){a.verifiedTimeoutStop();var d=a.statusThrottle[0];if(0!=d.companyID){d.companyName=i.companies[d.companyID].name,d.location=i.companies[d.companyID].city+", "+i.companies[d.companyID].state,d.rel=i.companies[d.companyID].markerNumber,d.iconClass=d.requestStatusShort.toLowerCase().replace(" ",""),i.companies[d.companyID].status=d.requestStatusShort,a.statuses.unshift(d),"Calling"==d.requestStatusShort&&i.numCompaniesCalled++,"Declined"==d.requestStatusShort&&i.numCompaniesRejected++,"Accepted"==d.requestStatusShort&&(c.getRatings(i.companies[d.companyID]).then(function(){console.log("*All ratings for company have been retrieved")}),i.companies[d.companyID].accepted=1,i.companies[d.companyID].acceptedOrder=a.numCompaniesAccepted,a.numCompaniesAccepted++),a.statusThrottle.shift();try{a.GoogleMap.setInfoBox(i.companies[d.companyID])}catch(e){}}else a.requestComplete(),a.pingStatusesStop()}console.log("*The current throttle is: ",a.statusThrottle)})},1e3)},requestComplete:function(){b.$broadcast("requestCompleted"),this.complete=!0},pingStatusesStop:function(){i.processing=!1,d.cancel(this.interval)},submit:function(){var a=f.defer();return testing&&this.setID(112669),c.searchAction3().then(function(b){i.pingStatusesStart(),a.resolve(b)}),a.promise},setStatusThrottle:function(a){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.requestStatusID==a)return!0}return!1}console.log("Status throttle response is: "+a);for(var c=0;c<a.length;c++){var d=a[c];b(d.requestStatusID,this.statusThrottle)||b(d.requestStatusID,this.statuses)||this.statusThrottle.push(d)}},setCompanies:function(a){this.companies=a},setCategory:function(a){this.category=a},setStatus:function(a){this.status=a},setDescription:function(a){this.description=a}};return i}]),myApp.factory("Storage",["User","Request","$localStorage",function(a,b,c){var d={name:!1,email:!1,phone:!1,zip:!1,recordingModalDismissed:!1,saveUser:function(){this.name=a.name,this.email=a.email,this.phone=a.phone,this.set()},"import":function(){a.name=c.sc_user_name,a.email=c.sc_user_email,a.phone=c.sc_user_phone,a.zip=c.sc_user_zip,this.name=c.sc_user_name,this.email=c.sc_user_phone,this.phone=c.sc_user_phone,this.zip=c.sc_user_zip,this.recordingModalDismissed=c.sc_recordingModalDismissed},saveZip:function(){this.zip=a.zipcode,this.set()},set:function(){c.sc_user_name=this.name,c.sc_user_email=this.email,c.sc_user_phone=this.phone,c.sc_user_zip=this.zip,c.sc_recordingModalDismissed=this.recordingModalDismissed
},empty:function(){c.$reset()}};return d}]),myApp.factory("User",[function(){var a={nameValidate:/[a-zA-Z]{2,}/,emailValidate:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,phoneValidate:/^((\([\d]{3}\))( [\d]{3}-))[\d]{4}|^[\d]{10}$/,getCategory:function(){return this.category},getCategoryID:function(){return this.categoryID},getZipcode:function(){return this.zipcode()},getName:function(){return this.name},getPhone:function(){return this.phone},getEmail:function(){return this.email},setCategory:function(a){this.category=a},setCategoryID:function(a){this.categoryID=a},setZipcode:function(a){this.zipcode=a},setName:function(a){this.name=a},setPhone:function(a){this.phone=a},setEmail:function(a){this.email=a},isNameValid:function(){return this.name&&this.nameValidate.test(this.getName())},isEmailValid:function(){return this.emailValidate.test(this.getEmail())},isPhoneValid:function(){return this.phoneValidate.test(this.getPhone())}};return a}]),myApp.factory("Overlay",[function(){var a={body:$("body"),isActive:!1,isActiveWithSpinner:!1,overlaySpinner:$("<div class='overlay-spinner'><img src='"+root+"images/ajax_loader.gif'/><div class='overlay-text-wrapper'><div class='overlay-text hidden'></div></div></div>"),overlayBackground:$("<div class='overlay'></div>"),add:function(a,b){return a&&!this.isActiveWithSpinner?(this.isActiveWithSpinner=!0,this.isActive=!0,this.body.append($(this.overlayBackground).append(this.overlaySpinner))):this.isActive?this.isActive&&!a&&(this.isActiveWithSpinner=!1,this.overlaySpinner.remove()):(this.isActive=!0,this.body.append(this.overlayBackground)),b&&this.message(b),this},remove:function(){return $(".overlay-text").html("").addClass("hidden"),this.isActive=this.isActiveWithSpinner=!1,this.overlayBackground.remove(),this.overlaySpinner.remove(),this},message:function(a){return this.isActiveWithSpinner||this.add(1),$(".overlay-text").html(a).removeClass("hidden"),this}};return a}]),myApp.factory("Location",["User","$q","$http","Overlay","$timeout","$window","MapLoader","Track","$state",function(a,b,c,d,e,f,g,h,i){var j={busy:!1,complete:function(){h.event(i.current.name+"_location_delegate_success"),d.remove(),console.log("removing busy status from complete"),this.busy=!1},error:function(a){var b;1==a?b="location":2==a&&(b="geocoding"),h.event(i.current.name+"_"+b+"_delegate_failed"),console.log("removing busy status from err"),this.busy=!1,d.remove(),this.opt_initial_check||new xAlert("Unable to obtain location")},geoLocate:function(a){function c(){return g.loadMaps().then(function(){console.log("*MapLoader, all loaded"),j.resolve(!0)},function(){console.log("*MapLoader rejected: not loaded"),a?j.reject(!1):new xAlert("Please verify you are connected to the internet and retry",function(a){1==a?c():j.reject(!1)},"Location Services","Retry,Cancel")}),j.promise}var e=this;e.busy=!0,a||(h.event("interaction",i.current.name+"_locate_button_pressed"),d.message("Locating...")),e.opt_initial_check=a;var f=b.defer(),j=b.defer();return c().then(function(){navigator.geolocation.getCurrentPosition(function(a){var b=new google.maps.Geocoder,c=a.coords.latitude,d=a.coords.longitude,g=new google.maps.LatLng(c,d);b.geocode({latLng:g},function(a,b){if(b==google.maps.GeocoderStatus.OK){var c=a[0].address_components,d=c[c.length-1].long_name,g=d.match(/\b\d{5}\b/g);g&&g.length>=1?(h.event(i.current.name+"_geocoding_delegate_success"),console.log("*Geolocated to zipcode: "+d),e.complete(),f.resolve(d)):(e.error(2),f.resolve())}else e.error(2),f.resolve()})},function(){e.error(1),f.resolve()},{timeout:4e3})},function(){e.busy=!1,f.resolve(!1)}),f.promise}};return j}]),myApp.factory("Categories",[function(){var a=[{id:"6745",name:"Test Spin"},{id:"13",name:"Accountants"},{id:"244",name:"Appliances Repair"},{id:"6746",name:"Auto Glass Repair"},{id:"479",name:"Auto Repair"},{id:"6747",name:"Bail Bonds"},{id:"6748",name:"Bus Rental"},{id:"6749",name:"Car Wash"},{id:"1075",name:"Carpet Cleaners"},{id:"4629",name:"Chiropractors"},{id:"1543",name:"Computer Repair"},{id:"1886",name:"Dentists"},{id:"6750",name:"Electricians"},{id:"2512",name:"Florists"},{id:"6752",name:"Furniture Upholstery"},{id:"6753",name:"Garage Door"},{id:"6754",name:"Garbage Removal"},{id:"2886",name:"Gyms & Fitness"},{id:"6771",name:"Handyman"},{id:"2999",name:"Heating and Cooling"},{id:"3515",name:"Landscapers"},{id:"364",name:"Lawyers - Bankruptcy"},{id:"360",name:"Lawyers - Family"},{id:"6755",name:"Lawyers - Traffic"},{id:"6756",name:"Limo Rental"},{id:"3674",name:"Locksmiths"},{id:"3735",name:"Maid Services"},{id:"3810",name:"Massage Therapy"},{id:"6757",name:"Moving & Storage"},{id:"6758",name:"Notaries"},{id:"4338",name:"Painters"},{id:"6759",name:"Party Planners"},{id:"4391",name:"Party Rental"},{id:"4431",name:"Personal Trainers"},{id:"6760",name:"Pest Control"},{id:"4509",name:"Physical Therapy"},{id:"4764",name:"Plumbers"},{id:"4990",name:"Real Estate"},{id:"6762",name:"Rent Office Furniture"},{id:"5223",name:"Roofers"},{id:"5609",name:"Snow Removal"},{id:"6764",name:"Tailors"},{id:"6765",name:"Tax Preparation"},{id:"5947",name:"Taxicabs"},{id:"6766",name:"Towing"},{id:"6770",name:"Tree Removal"},{id:"6767",name:"Tutors"},{id:"6008",name:"TV Repair"},{id:"6768",name:"Veterinarians"},{id:"6769",name:"Window Replacement"}];return a}]),String.prototype.toHHMMSS=function(){var a=parseInt(this,10),b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),d=a-3600*b-60*c;10>d&&(d="0"+d);var e=c+":"+d;return e},myApp.factory("Uploader",["$q",function(a){var b={url:api_root+"components/audio-upload/upload.php",success:function(a){console.log("Code = "+a.responseCode),console.log("Response = "+a.response),console.log("Sent = "+a.bytesSent),b.uploadPromise.resolve(a)},reset:function(){this.busy=!1},fail:function(a){new xAlert("An error has occurred when sending your recording: Code = "+a.code),console.log("upload error source "+a.source),console.log("upload error target "+a.target),b.uploadPromise.reject(a)},uploadRecording:function(b,c){var d=this;d.uploadPromise=a.defer();var e=encodeURI(d.url+"?"+$.param(c)),f=b;console.log("File url is: "+f);var g=new FileUploadOptions;g.fileKey="file",g.fileName=f.substr(f.lastIndexOf("/")+1),console.log("*The Url we're pinging for UPLOAD is: "+e),"iOS"==device.platform?g.mimeType="audio/wav":"Android"==device.platform&&(g.mimeType="audio/amr"),console.log("*Options mimetype: "+g.mimeType),g.chunkedMode=!1;var h=new FileTransfer;return h.upload(f,e,d.success,d.fail,g),d.uploadPromise.promise}};return b}]),myApp.factory("Recording",["$timeout","$interval","User","$http","$q","$rootScope",function(a,b,c,d,e,f){var g={length:0,position:0,lengthToString:"",positionToString:"",playing:0,permissionsStatus:0,paused:0,initialized:!1,init:function(){var a=this;return a.initialized?void 0:(console.log("Attempting to initialize"),a.initialized=!0,a.setAudio(),a.initialPromise=e.defer(),window.requestFileSystem(LocalFileSystem.TEMPORARY,0,a.gotFS,function(){}),a.initialPromise.promise)},setAudio:function(a){this.mimeType=a?a:"Android"==window.device.platform?"audio/amr":"audio/wav";var b=this.mimeType.split("/");b=b[1],this.audioType=b,"wav"==this.audioType&&(this.audioType="aiff"),console.log("Set recording's mimeType to: '"+this.mimeType+"' and audioType to: '"+this.audioType+"'")},gotFS:function(a){a.root.getFile("sc_recording.wav",{create:!0,exclusive:!1},function(a){g.gotFileEntry(a)},function(){alert("fail")})},newMediaRec:function(){var a=this;if(console.log("Creating new media rec with src: "+a.toURL),"Android"==device.platform)var b=a.toURL;else var b=a.src;a.mediaRec=new Media(b,function(){},function(b){console.log("MediaError callback code: "+b.code),console.log("MediaError callback message: "+b.message),1==b.code&&(new xAlert("To record audio, please enable audio permissions for this application from your devices settings page.",function(){},"Recording Permissions Declined"),a.permissionsStatus=2)},function(b){console.log("*Recording status has changed to: "+b),2==b&&(a.permissionsStatus=1)})},gotFileEntry:function(a){var b=this;b.toURL=a.toURL(),b.src=a.fullPath,console.log("***Creating a media file at: "+a.fullPath),b.newMediaRec(),g.initialPromise.resolve(!0)},startRecord:function(){var a=this,c=e.defer();return a.saved?(a.playing&&a.pause(),new xAlert("Are you sure you want to delete the details recording?",function(b){1==b?(a.mediaRec.release(),a.recording=!1,a.reset(),f.$apply(),c.resolve(a)):c.resolve(a)},"Alert","Yes, No")):(a.mediaRec.startRecord(),a.interval=b(function(){1==a.permissionsStatus&&(a.recording=!0,a.length+=.1,a.lengthToString=a.length.toString().toHHMMSS(),console.log("*Recording Length: "+a.length))},100),c.resolve(a)),c.promise},stopRecord:function(a){var c=this;c.recording=!1,c.mediaRec.stopRecord(),c.playing&&c.stop(),b.cancel(c.interval),c.length<3&&"recording"!=testingType&&!a?(new xAlert("Recording must be at least 3 seconds"),c.reset()):(c.newMediaRec(),c.saved=!0)},toggleRecord:function(){var a=this;a.recording?a.recording&&(a.recording=!1,a.stopRecord()):a.startRecord()},togglePlay:function(){var a=this;a.playing?a.pause():a.playing||a.play()},play:function(){var a=this;a.playing=1,a.paused=0,a.mediaRec.play(),a.playInterval=b(function(){a.position+=.1,a.positionToString=a.position.toString().toHHMMSS(),a.position>=a.length&&a.stop()},100)},reset:function(){var a=this;console.log("*Recording.reset()"),a.position=0,a.playing=0,a.paused=0,a.length=0,a.recording=!1,a.saved=!1,a.positionToString="",a.lengthToString="",this.mediaRec&&(this.mediaRec.pause(),this.mediaRec.stop(),this.mediaRec.release())},rewind:function(){self.playing=0,self.paused=0},pause:function(){var a=this;a.mediaRec.pause(),a.paused=1,a.playing=0,b.cancel(a.playInterval)},stop:function(){var a=this;a.playing&&a.mediaRec.pause(),a.mediaRec.stop(),a.playing=0,a.paused=0,a.position=0,b.cancel(a.playInterval)}};return g}]),angular.module("myApp.controllers",[]).controller("actionButtonController",["$scope","$state","Track",function(a,b,c){a.click=function(a){c.event(2,b.current.name+"_"+a+"_button_pressed")}}]).controller("wrapperController",["$scope","App","Storage","SCAPI","Categories","Track","$rootScope","Request","Nav","MapLoader","Location","User","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){console.log("***locating...."),j.loadMaps().then(function(){l.zipcode||(console.log("*Going to geoLocate from wrapperController"),k.geoLocate(a).then(function(a){l.setZipcode(a)}))})}a.app=b,c.import(),d.init(h),a.categories=e,f.init(),f.event(1,"application_opened"),g.$on("$locationChangeSuccess",function(){console.log("*page*"+m.url()),f.event(1,m.url().replace("/","")+"_screen_opened"),i.reset()}),a.isPhoneGap=isPhoneGap;var o=480==window.screen.height,p=568==window.screen.height;o?a.iphone4=!0:p&&(a.iphone5=!0),n(1)}]).controller("bodyController",["$location","$scope","Menu","AnimationService",function(a,b,c,d){a.path("statusBug"==testingType?"/statusBug":"/step1"),b.menu=c,b.click=function(){c.active=!1},b.animationService=d}]).controller("step1Controller",["App","$scope","Location","User","Request","$location","Categories","Overlay","SCAPI","$q","Splash","$state","Track",function(a,b,c,d,e,f,g,h,i,j,k,l,m){e.reset(),b.app=a,b.isPhoneGap=isPhoneGap,b.Location=c,b.User=d,b.Request=e,b.$on("$viewContentLoaded",function(){a.loaded||(a.loaded=!0,isPhoneGap&&(navigator.splashscreen.hide(),k.blip().then(function(){console.log("*--*Splash screen removed*--*")})))}),b.change=function(){m.event(2,"step1_category_selected");for(var a=0;a<b.categories.length;a++)b.categories[a].id==e.categoryID&&e.setCategory(b.categories[a].name);console.log("*Set Request category ID to:"+e.categoryID),console.log("*Set Request category to:"+e.category)},setTimeout(function(){document.getElementById("disabled").disabled="yes"},1),b.getLocation=function(){console.log("*scope.getLocation"),h.add(1),c.geoLocate().then(function(a){console.log("Returned..."),b.Location.busy=!1,a&&b.User.setZipcode(a),h.remove()})},b.next=function(){if(skipAPICalls)return e.setID(testRequestID),void l.go("step2");var a=j.defer();return h.add(1),console.log("SCAPI: ",i),i.step1().then(function(b){h.remove(),console.log("*Step 1 Returned: ",b);b.split("|");return-1==b.indexOf("requestID|")?(new xAlert(b),!1):(a.resolve(b),void l.go("step2"))}),a.promise};var n=f.search().source;if(n){for(var o=0;o<g.length;o++)g[o].name==n&&(e.categoryID=g[o].id);e.setCategory(n)}}]).controller("step2Controller",["RecordingModal","Overlay","Uploader","$http","Recording","$timeout","SCAPI","Times","$scope","User","Request","$state","$interval",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){k.submit().then(function(){b.remove(),l.go("step3")})}i.isPhoneGap=isPhoneGap,i.recordingModal=a,$.isEmptyObject(k.companies)&&g.getCompaniesList(),i.Times=h,i.Request=k,i.timetable=function(){l.go("timetable")},i.recordingSaved=e.saved,e.saved?(k.setDescription(""),$("textarea").attr("placeholder","Recording Saved").val("")):$("textarea").attr("placeholder","Describe what you need help with in as much detail as possible..."),i.next=function(){return skipAPICalls?(k.setDescription("This is a test description set by the skip API Calls variable"),h.buttons={now:!0},void l.go("step2a")):e.saved||k.isDescriptionValid()?h.isEmpty()?(new xAlert("Please select a time"),!1):void(j.isEmailValid()&&j.isNameValid()&&j.isPhoneValid()?new xAlert(alerts.call_companies.body,function(a){2==a&&(b.add(1),e.saved?(b.message("Uploading Recording..."),c.uploadRecording(e.toURL,{audioType:e.audioType,reqID:k.id}).then(function(){console.log("*Audio Uploaded"),b.message("Encoding Recording..."),d({url:api_root+"api/mobile/v2/encodeAudio.php?audioType="+e.audioType+"&requestID="+k.id,method:"GET",headers:{"Content-Type":"application/json"}}).success(function(a){console.log("*Audio Encoding returned: "+a),b.message("Preparing Request..."),n()}).error(function(){new xAlert("Error Encoding Recording")})},function(){b.remove()})):(b.message("Preparing Request..."),n()))},"Alert","Cancel,Ok"):l.go("step2a")):(new xAlert("Description must be 7 words"),!1)};var o=function(){"0px"==$(this).css("left")&&(f(function(){a.show()},1e3),$("#bodyContainer").unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",o))};$("#bodyContainer").bind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",o);var p=m(function(){a.hasBeenActive?m.cancel(p):"0px"==$("#bodyContainer").css("left")&&(a.show(),m.cancel(p))},1e3);if(isPhoneGap)var q=m(function(){e.initialized?m.cancel(q):"0px"==$("#bodyContainer").css("left")&&(e.init(),m.cancel(q))},1e3);i.$on("$destroy",function(){$("#bodyContainer").unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd")})}]).controller("step2aController",["$http","Uploader","Overlay","Recording","Storage","$rootScope","User","Times","$scope","Request","$state","$window",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){c.message("Preparing Request..."),j.submit().then(function(){c.remove(),k.go("step3")})}var n=angular.copy(g),o=f.$on("back",function(){g.setName(n.getName()),g.setEmail(n.getEmail()),g.setPhone(n.getPhone())});i.User=g,i.Times=h,i.emailKeyup=function(a){a.stopPropagation(),console.log(a)};var p=function(){""!=g.phone&&(g.phone=String(parseInt(g.phone.replace(/[)( -]/g,""))))},q=function(){g.phone>0&&""!=g.phone&&"NaN"!=g.phone&&(g.phone=g.phone.replace(/([\d]{3})([\d]{3})([\d]{4})/,"($1) $2-$3")),"NaN"==g.phone&&(g.phone="")};i.$on("$destroy",function(){o()}),i.onPhoneFocus=p,i.onPhoneBlur=q,q(),i.next=function(){return skipAPICalls?(g.setName("This is a test name"),g.setEmail("test@test.test"),g.setPhone(testPhoneNumber),void m()):void(g.isNameValid()?g.isEmailValid()?g.isPhoneValid()?(e.saveUser(),n=angular.copy(g),!j.isDescriptionValid()&&!d.saved||h.isEmpty()?l.history.back():new xAlert(alerts.call_companies.body,function(e){2==e&&(c.add(1),d.saved?(c.message("Uploading Recording..."),b.uploadRecording(d.toURL,{audioType:d.audioType,reqID:j.id}).then(function(){console.log("*Audio Uploaded"),c.message("Encoding Recording..."),a({url:api_root+"api/mobile/v2/encodeAudio.php?audioType=aiff&requestID="+j.id,method:"GET",headers:{"Content-Type":"application/json"}}).success(function(a){console.log("*Audio Encoding returned: "+a),c.message("Preparing Request..."),m()}).error(function(){new xAlert("Error Encoding Recording")})})):m())},"Alert","Cancel,Ok")):new xAlert("Invalid phone number"):new xAlert("Invalid email"):new xAlert("Invalid name"))}}]).controller("step3Controller",["$urlRouter","$rootScope","$state","Nav","GoogleMap","Request","$scope",function(a,b,c,d,e,f,g){var h=b.$on("$stateChangeStart",function(b,d){function e(){return b.preventDefault(),f.alert=new xAlert(alerts.abandon.body,function(b){1==b&&(f.reset(),h(),c.go(d.name),a.sync()),console.log(b)},alerts.abandon.title,"Yes, Cancel"),!1}"summary"!=d.name&&"step1"!=d.name&&e()}),i=b.$on("$locationChangeStart",function(b,d){return-1==d.indexOf("step3")&&-1==d.indexOf("step1")&&-1==d.indexOf("summary")?(b.preventDefault(),f.alert=new xAlert(alerts.abandon.body,function(b){1==b&&(f.reset(),c.go("step1"),a.sync()),console.log(b)},alerts.abandon.title,"Yes, Cancel"),!1):void 0});g.$on("$destroy",function(){h(),i()}),f.complete&&(d.direction="forward"),g.companies=f.companies,g.request=f,e.init(),g.statuses=f.statuses}]).controller("summaryController",["Request","SCAPI","$scope",function(a,b,c){a.setID(112669),c.request=a,c.acceptanceRate=a.numCompaniesCalled?Math.round(parseFloat(a.numCompaniesAccepted/a.numCompaniesCalled*100))+"%":"0%",b.timeSaved().then(function(a){c.timeSaved=a.timeSaved}),c.twitterMessage=encodeURIComponent("SevaCall found me help in minutes! sevacall.com #savetime #awesome @sevacall"),c.twitterShare=function(){var a="https://twitter.com/intent/tweet?url=http://www.sevacall.com&text=";a+=encodeURIComponent("SevaCall found me help in minutes! sevacall.com #savetime #awesome @sevacall"),window.open(a,"_system")},c.facebookShare=function(){var a="http://facebook.com/dialog/feed";return a+="?app_id=543995755650717",a+="&link=www.sevacall.com",a+="&name= Seva Call - Tell us what and when, we'll find the professionals!",a+="&description=Seva Call works to find local businesses that can help you with your service need instantly, like a free personal concierge service. Within minutes you will be connected to providers that can service your specific problem, on your schedule, at your location.",a+="&redirect_uri=http://sevacall.com",console.log("popping up fb url: "+a),window.open("http://www.facebook.com/dialog/feed?app_id=543995755650717&link=http://www.sevacall.com&name="+encodeURIComponent("Seva Call - Tell us what and when, we'll find the professionals!")+"&redirect_uri=http://sevacall.com","_system"),!1}}]).controller("menuController",["$rootScope","$parse","$attrs","$scope","Menu","Track","$state",function(a,b,c,d,e,f,g){d.Menu=e,a.$on("click",function(){e.active=!1}),d.click=function(a){f.event(2,g.current.name+"_"+a+"_button_pressed")}}]).controller("headerController",["Nav","Request","$rootScope","$state","$window","Menu","$attrs","$scope",function(a,b,c,d,e,f,g,h){h.request=b,h.$on("$stateChangeSuccess",function(a,b){"step1"==b.name?$("#nav").hide():$("#nav").show()}),h.navigation=a,h.nav=function(){"forward"==a.direction?(c.$broadcast("forward"),d.go("summary")):(c.$broadcast("back"),e.history.back())},h.menuToggle=function(){f.active=1}}]).controller("timeTableController",["Times","$scope","$rootScope",function(a,b,c){b.Times=a,console.log("*Times object:"+a.postify());var d=angular.copy(a.timesActive),e=c.$on("back",function(){a.timesActive=d});b.$on("$destroy",function(){e()})}]).controller("informationController",["$rootScope","Overlay","resolveSize","$scope","$window","Menu","$state",function(a,b,c,d,e,f,g){function h(){var a=$(".ui-view-container").width(),b=parseInt(a/16*9)+2;$(".video-box").css({height:b+"px","max-height":"400px"}),400>b?$(".video-box").css({width:"100%"}):(b=400,a=b/9*16,$(".video-box").css({width:a+"px"}))}var i=function(){"information"==g.current.name&&$("#sc-video").removeClass("hidden")},j=function(){console.log("*Adding iFrame on transition end"),"0px"==$(this).css("left")&&(i(),$("#bodyContainer").unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",j))};$("#bodyContainer").bind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",j),d.$on("$destroy",function(){$("#sc-video").addClass("hidden")}),$(".video-box").css({height:c[0]+"px",width:c[1]+"px"}),angular.element(e).bind("resize",function(){h()})}]).controller("recordingController",["$q","$urlRouter","$rootScope","$state","Recording","$scope",function(a,b,c,d,e,f){f.recording=e;var g=c.$on("$stateChangeStart",function(a){function d(){e.stopRecord(1),e.reset(),c.$apply(),a.preventDefault(),new xAlert("Recording must be at least 3 seconds",function(){b.sync()})}e.playing&&e.stop(),e.recording&&e.length<3?d():e.recording&&e.length>=3&&e.stopRecord()}),h=c.$on("$locationChangeStart",function(a,d){return e.playing&&e.stop(),-1==d.indexOf("recording")&&e.recording&&e.length<3?(e.stopRecord(1),e.reset(),c.$apply(),a.preventDefault(),new xAlert("Recording must be at least 3 seconds",function(){b.sync()}),!1):void(e.recording&&-1==d.indexOf("recording")&&e.stopRecord())});f.next=function(){e.playing&&e.stop(),e.recording?!e.recording||e.length>=3?(e.stopRecord(),d.go("step2")):e.recording&&e.length<3?(e.stopRecord(1),e.reset(),c.$apply(),event.preventDefault(),new xAlert("Recording must be at least 3 seconds",function(){b.sync()})):d.go("step2"):d.go("step2")},f.$on("$destroy",function(){g(),h()})}]),angular.module("myApp.directives",[]).directive("appVersion",["version",function(a){return function(b,c){c.text(a)}}]).directive("scHeader",[function(){return{restrict:"EA",replace:!0,controller:"headerController",templateUrl:"views/header.html"}}]).directive("actionButton",["User",function(){return{restrict:"EA",replace:!0,controller:"actionButtonController",scope:{text:"=",clickfunction:"="},link:function(a,b){b.bind("click",function(){a.click(a.text)})},templateUrl:"views/button.html"}}]).directive("scMenu",[function(){return{restrict:"EA",replace:!0,controller:"menuController",templateUrl:"views/menu.html"}}]).directive("phoneInput",[function(){return{restrict:"EA",replace:!0,template:'<input id="phone" maxlength="10" type="tel" ng-model="User.phone"/>'}}]).directive("ios7StatusBar",[function(){return{restrict:"EA",replace:!0,controller:"ios7StatusBarController",templateUrl:"views/statusBar.html"}}]).directive("scBlur",["$parse",function(a){return function(b,c,d){var e=a(d.scBlur);c.bind("blur",function(a){b.$apply(function(){e(b,{$event:a})})})}}]).directive("scFocus",["$parse",function(a){return function(b,c,d){var e=a(d.scFocus);c.bind("focus",function(a){b.$apply(function(){e(b,{$event:a})})})}}]),app.initialize(),isPhoneGap)document.addEventListener("deviceready",function(){angular.bootstrap(document,["myApp"])});else try{angular.bootstrap(document,["myApp"])}catch(e){console.error(e.stack||e.message||e)}